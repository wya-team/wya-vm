'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var Vue = _interopDefault(require('vue'));

/**
 * Removes all key-value entries from the list cache.
 *
 * @private
 * @name clear
 * @memberOf ListCache
 */
function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}

var _listCacheClear = listCacheClear;

/**
 * Performs a
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * comparison between two values to determine if they are equivalent.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'a': 1 };
 * var other = { 'a': 1 };
 *
 * _.eq(object, object);
 * // => true
 *
 * _.eq(object, other);
 * // => false
 *
 * _.eq('a', 'a');
 * // => true
 *
 * _.eq('a', Object('a'));
 * // => false
 *
 * _.eq(NaN, NaN);
 * // => true
 */
function eq(value, other) {
  return value === other || (value !== value && other !== other);
}

var eq_1 = eq;

/**
 * Gets the index at which the `key` is found in `array` of key-value pairs.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} key The key to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq_1(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}

var _assocIndexOf = assocIndexOf;

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/** Built-in value references. */
var splice = arrayProto.splice;

/**
 * Removes `key` and its value from the list cache.
 *
 * @private
 * @name delete
 * @memberOf ListCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function listCacheDelete(key) {
  var data = this.__data__,
      index = _assocIndexOf(data, key);

  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}

var _listCacheDelete = listCacheDelete;

/**
 * Gets the list cache value for `key`.
 *
 * @private
 * @name get
 * @memberOf ListCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function listCacheGet(key) {
  var data = this.__data__,
      index = _assocIndexOf(data, key);

  return index < 0 ? undefined : data[index][1];
}

var _listCacheGet = listCacheGet;

/**
 * Checks if a list cache value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf ListCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function listCacheHas(key) {
  return _assocIndexOf(this.__data__, key) > -1;
}

var _listCacheHas = listCacheHas;

/**
 * Sets the list cache `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf ListCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the list cache instance.
 */
function listCacheSet(key, value) {
  var data = this.__data__,
      index = _assocIndexOf(data, key);

  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}

var _listCacheSet = listCacheSet;

/**
 * Creates an list cache object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function ListCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `ListCache`.
ListCache.prototype.clear = _listCacheClear;
ListCache.prototype['delete'] = _listCacheDelete;
ListCache.prototype.get = _listCacheGet;
ListCache.prototype.has = _listCacheHas;
ListCache.prototype.set = _listCacheSet;

var _ListCache = ListCache;

/**
 * Removes all key-value entries from the stack.
 *
 * @private
 * @name clear
 * @memberOf Stack
 */
function stackClear() {
  this.__data__ = new _ListCache;
  this.size = 0;
}

var _stackClear = stackClear;

/**
 * Removes `key` and its value from the stack.
 *
 * @private
 * @name delete
 * @memberOf Stack
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function stackDelete(key) {
  var data = this.__data__,
      result = data['delete'](key);

  this.size = data.size;
  return result;
}

var _stackDelete = stackDelete;

/**
 * Gets the stack value for `key`.
 *
 * @private
 * @name get
 * @memberOf Stack
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function stackGet(key) {
  return this.__data__.get(key);
}

var _stackGet = stackGet;

/**
 * Checks if a stack value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Stack
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function stackHas(key) {
  return this.__data__.has(key);
}

var _stackHas = stackHas;

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;

var _freeGlobal = freeGlobal;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = _freeGlobal || freeSelf || Function('return this')();

var _root = root;

/** Built-in value references. */
var Symbol$1 = _root.Symbol;

var _Symbol = Symbol$1;

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Built-in value references. */
var symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;

/**
 * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw `toStringTag`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

var _getRawTag = getRawTag;

/** Used for built-in method references. */
var objectProto$1 = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString$1 = objectProto$1.toString;

/**
 * Converts `value` to a string using `Object.prototype.toString`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString$1.call(value);
}

var _objectToString = objectToString;

/** `Object#toString` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;

/**
 * The base implementation of `getTag` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag$1 && symToStringTag$1 in Object(value))
    ? _getRawTag(value)
    : _objectToString(value);
}

var _baseGetTag = baseGetTag;

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

var isObject_1 = isObject;

/** `Object#toString` result references. */
var asyncTag = '[object AsyncFunction]',
    funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]',
    proxyTag = '[object Proxy]';

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  if (!isObject_1(value)) {
    return false;
  }
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 9 which returns 'object' for typed arrays and other constructors.
  var tag = _baseGetTag(value);
  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
}

var isFunction_1 = isFunction;

/** Used to detect overreaching core-js shims. */
var coreJsData = _root['__core-js_shared__'];

var _coreJsData = coreJsData;

/** Used to detect methods masquerading as native. */
var maskSrcKey = (function() {
  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');
  return uid ? ('Symbol(src)_1.' + uid) : '';
}());

/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */
function isMasked(func) {
  return !!maskSrcKey && (maskSrcKey in func);
}

var _isMasked = isMasked;

/** Used for built-in method references. */
var funcProto = Function.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to convert.
 * @returns {string} Returns the source code.
 */
function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return (func + '');
    } catch (e) {}
  }
  return '';
}

var _toSource = toSource;

/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

/** Used to detect host constructors (Safari). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used for built-in method references. */
var funcProto$1 = Function.prototype,
    objectProto$2 = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString$1 = funcProto$1.toString;

/** Used to check objects for own properties. */
var hasOwnProperty$1 = objectProto$2.hasOwnProperty;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */
function baseIsNative(value) {
  if (!isObject_1(value) || _isMasked(value)) {
    return false;
  }
  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;
  return pattern.test(_toSource(value));
}

var _baseIsNative = baseIsNative;

/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function getValue(object, key) {
  return object == null ? undefined : object[key];
}

var _getValue = getValue;

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = _getValue(object, key);
  return _baseIsNative(value) ? value : undefined;
}

var _getNative = getNative;

/* Built-in method references that are verified to be native. */
var Map = _getNative(_root, 'Map');

var _Map = Map;

/* Built-in method references that are verified to be native. */
var nativeCreate = _getNative(Object, 'create');

var _nativeCreate = nativeCreate;

/**
 * Removes all key-value entries from the hash.
 *
 * @private
 * @name clear
 * @memberOf Hash
 */
function hashClear() {
  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};
  this.size = 0;
}

var _hashClear = hashClear;

/**
 * Removes `key` and its value from the hash.
 *
 * @private
 * @name delete
 * @memberOf Hash
 * @param {Object} hash The hash to modify.
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}

var _hashDelete = hashDelete;

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/** Used for built-in method references. */
var objectProto$3 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$2 = objectProto$3.hasOwnProperty;

/**
 * Gets the hash value for `key`.
 *
 * @private
 * @name get
 * @memberOf Hash
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function hashGet(key) {
  var data = this.__data__;
  if (_nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED ? undefined : result;
  }
  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;
}

var _hashGet = hashGet;

/** Used for built-in method references. */
var objectProto$4 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$3 = objectProto$4.hasOwnProperty;

/**
 * Checks if a hash value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Hash
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function hashHas(key) {
  var data = this.__data__;
  return _nativeCreate ? (data[key] !== undefined) : hasOwnProperty$3.call(data, key);
}

var _hashHas = hashHas;

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED$1 = '__lodash_hash_undefined__';

/**
 * Sets the hash `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Hash
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the hash instance.
 */
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = (_nativeCreate && value === undefined) ? HASH_UNDEFINED$1 : value;
  return this;
}

var _hashSet = hashSet;

/**
 * Creates a hash object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Hash(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `Hash`.
Hash.prototype.clear = _hashClear;
Hash.prototype['delete'] = _hashDelete;
Hash.prototype.get = _hashGet;
Hash.prototype.has = _hashHas;
Hash.prototype.set = _hashSet;

var _Hash = Hash;

/**
 * Removes all key-value entries from the map.
 *
 * @private
 * @name clear
 * @memberOf MapCache
 */
function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    'hash': new _Hash,
    'map': new (_Map || _ListCache),
    'string': new _Hash
  };
}

var _mapCacheClear = mapCacheClear;

/**
 * Checks if `value` is suitable for use as unique object key.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
 */
function isKeyable(value) {
  var type = typeof value;
  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
    ? (value !== '__proto__')
    : (value === null);
}

var _isKeyable = isKeyable;

/**
 * Gets the data for `map`.
 *
 * @private
 * @param {Object} map The map to query.
 * @param {string} key The reference key.
 * @returns {*} Returns the map data.
 */
function getMapData(map, key) {
  var data = map.__data__;
  return _isKeyable(key)
    ? data[typeof key == 'string' ? 'string' : 'hash']
    : data.map;
}

var _getMapData = getMapData;

/**
 * Removes `key` and its value from the map.
 *
 * @private
 * @name delete
 * @memberOf MapCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function mapCacheDelete(key) {
  var result = _getMapData(this, key)['delete'](key);
  this.size -= result ? 1 : 0;
  return result;
}

var _mapCacheDelete = mapCacheDelete;

/**
 * Gets the map value for `key`.
 *
 * @private
 * @name get
 * @memberOf MapCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function mapCacheGet(key) {
  return _getMapData(this, key).get(key);
}

var _mapCacheGet = mapCacheGet;

/**
 * Checks if a map value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf MapCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function mapCacheHas(key) {
  return _getMapData(this, key).has(key);
}

var _mapCacheHas = mapCacheHas;

/**
 * Sets the map `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf MapCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the map cache instance.
 */
function mapCacheSet(key, value) {
  var data = _getMapData(this, key),
      size = data.size;

  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}

var _mapCacheSet = mapCacheSet;

/**
 * Creates a map cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function MapCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `MapCache`.
MapCache.prototype.clear = _mapCacheClear;
MapCache.prototype['delete'] = _mapCacheDelete;
MapCache.prototype.get = _mapCacheGet;
MapCache.prototype.has = _mapCacheHas;
MapCache.prototype.set = _mapCacheSet;

var _MapCache = MapCache;

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE = 200;

/**
 * Sets the stack `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Stack
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the stack cache instance.
 */
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof _ListCache) {
    var pairs = data.__data__;
    if (!_Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new _MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}

var _stackSet = stackSet;

/**
 * Creates a stack cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Stack(entries) {
  var data = this.__data__ = new _ListCache(entries);
  this.size = data.size;
}

// Add methods to `Stack`.
Stack.prototype.clear = _stackClear;
Stack.prototype['delete'] = _stackDelete;
Stack.prototype.get = _stackGet;
Stack.prototype.has = _stackHas;
Stack.prototype.set = _stackSet;

var _Stack = Stack;

/**
 * A specialized version of `_.forEach` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns `array`.
 */
function arrayEach(array, iteratee) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    if (iteratee(array[index], index, array) === false) {
      break;
    }
  }
  return array;
}

var _arrayEach = arrayEach;

var defineProperty = (function() {
  try {
    var func = _getNative(Object, 'defineProperty');
    func({}, '', {});
    return func;
  } catch (e) {}
}());

var _defineProperty = defineProperty;

/**
 * The base implementation of `assignValue` and `assignMergeValue` without
 * value checks.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function baseAssignValue(object, key, value) {
  if (key == '__proto__' && _defineProperty) {
    _defineProperty(object, key, {
      'configurable': true,
      'enumerable': true,
      'value': value,
      'writable': true
    });
  } else {
    object[key] = value;
  }
}

var _baseAssignValue = baseAssignValue;

/** Used for built-in method references. */
var objectProto$5 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$4 = objectProto$5.hasOwnProperty;

/**
 * Assigns `value` to `key` of `object` if the existing value is not equivalent
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function assignValue(object, key, value) {
  var objValue = object[key];
  if (!(hasOwnProperty$4.call(object, key) && eq_1(objValue, value)) ||
      (value === undefined && !(key in object))) {
    _baseAssignValue(object, key, value);
  }
}

var _assignValue = assignValue;

/**
 * Copies properties of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy properties from.
 * @param {Array} props The property identifiers to copy.
 * @param {Object} [object={}] The object to copy properties to.
 * @param {Function} [customizer] The function to customize copied values.
 * @returns {Object} Returns `object`.
 */
function copyObject(source, props, object, customizer) {
  var isNew = !object;
  object || (object = {});

  var index = -1,
      length = props.length;

  while (++index < length) {
    var key = props[index];

    var newValue = customizer
      ? customizer(object[key], source[key], key, object, source)
      : undefined;

    if (newValue === undefined) {
      newValue = source[key];
    }
    if (isNew) {
      _baseAssignValue(object, key, newValue);
    } else {
      _assignValue(object, key, newValue);
    }
  }
  return object;
}

var _copyObject = copyObject;

/**
 * The base implementation of `_.times` without support for iteratee shorthands
 * or max array length checks.
 *
 * @private
 * @param {number} n The number of times to invoke `iteratee`.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the array of results.
 */
function baseTimes(n, iteratee) {
  var index = -1,
      result = Array(n);

  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}

var _baseTimes = baseTimes;

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

var isObjectLike_1 = isObjectLike;

/** `Object#toString` result references. */
var argsTag = '[object Arguments]';

/**
 * The base implementation of `_.isArguments`.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 */
function baseIsArguments(value) {
  return isObjectLike_1(value) && _baseGetTag(value) == argsTag;
}

var _baseIsArguments = baseIsArguments;

/** Used for built-in method references. */
var objectProto$6 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$5 = objectProto$6.hasOwnProperty;

/** Built-in value references. */
var propertyIsEnumerable = objectProto$6.propertyIsEnumerable;

/**
 * Checks if `value` is likely an `arguments` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 *  else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
var isArguments = _baseIsArguments(function() { return arguments; }()) ? _baseIsArguments : function(value) {
  return isObjectLike_1(value) && hasOwnProperty$5.call(value, 'callee') &&
    !propertyIsEnumerable.call(value, 'callee');
};

var isArguments_1 = isArguments;

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */
var isArray = Array.isArray;

var isArray_1 = isArray;

/**
 * This method returns `false`.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {boolean} Returns `false`.
 * @example
 *
 * _.times(2, _.stubFalse);
 * // => [false, false]
 */
function stubFalse() {
  return false;
}

var stubFalse_1 = stubFalse;

var isBuffer_1 = createCommonjsModule(function (module, exports) {
/** Detect free variable `exports`. */
var freeExports = exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Built-in value references. */
var Buffer = moduleExports ? _root.Buffer : undefined;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;

/**
 * Checks if `value` is a buffer.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
 * @example
 *
 * _.isBuffer(new Buffer(2));
 * // => true
 *
 * _.isBuffer(new Uint8Array(2));
 * // => false
 */
var isBuffer = nativeIsBuffer || stubFalse_1;

module.exports = isBuffer;
});

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/** Used to detect unsigned integer values. */
var reIsUint = /^(?:0|[1-9]\d*)$/;

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER : length;

  return !!length &&
    (type == 'number' ||
      (type != 'symbol' && reIsUint.test(value))) &&
        (value > -1 && value % 1 == 0 && value < length);
}

var _isIndex = isIndex;

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER$1 = 9007199254740991;

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This method is loosely based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 * @example
 *
 * _.isLength(3);
 * // => true
 *
 * _.isLength(Number.MIN_VALUE);
 * // => false
 *
 * _.isLength(Infinity);
 * // => false
 *
 * _.isLength('3');
 * // => false
 */
function isLength(value) {
  return typeof value == 'number' &&
    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER$1;
}

var isLength_1 = isLength;

/** `Object#toString` result references. */
var argsTag$1 = '[object Arguments]',
    arrayTag = '[object Array]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag$1 = '[object Function]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    objectTag = '[object Object]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    weakMapTag = '[object WeakMap]';

var arrayBufferTag = '[object ArrayBuffer]',
    dataViewTag = '[object DataView]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag$1] = typedArrayTags[arrayTag] =
typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
typedArrayTags[errorTag] = typedArrayTags[funcTag$1] =
typedArrayTags[mapTag] = typedArrayTags[numberTag] =
typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
typedArrayTags[setTag] = typedArrayTags[stringTag] =
typedArrayTags[weakMapTag] = false;

/**
 * The base implementation of `_.isTypedArray` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 */
function baseIsTypedArray(value) {
  return isObjectLike_1(value) &&
    isLength_1(value.length) && !!typedArrayTags[_baseGetTag(value)];
}

var _baseIsTypedArray = baseIsTypedArray;

/**
 * The base implementation of `_.unary` without support for storing metadata.
 *
 * @private
 * @param {Function} func The function to cap arguments for.
 * @returns {Function} Returns the new capped function.
 */
function baseUnary(func) {
  return function(value) {
    return func(value);
  };
}

var _baseUnary = baseUnary;

var _nodeUtil = createCommonjsModule(function (module, exports) {
/** Detect free variable `exports`. */
var freeExports = exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Detect free variable `process` from Node.js. */
var freeProcess = moduleExports && _freeGlobal.process;

/** Used to access faster Node.js helpers. */
var nodeUtil = (function() {
  try {
    // Use `util.types` for Node.js 10+.
    var types = freeModule && freeModule.require && freeModule.require('util').types;

    if (types) {
      return types;
    }

    // Legacy `process.binding('util')` for Node.js < 10.
    return freeProcess && freeProcess.binding && freeProcess.binding('util');
  } catch (e) {}
}());

module.exports = nodeUtil;
});

/* Node.js helper references. */
var nodeIsTypedArray = _nodeUtil && _nodeUtil.isTypedArray;

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
var isTypedArray = nodeIsTypedArray ? _baseUnary(nodeIsTypedArray) : _baseIsTypedArray;

var isTypedArray_1 = isTypedArray;

/** Used for built-in method references. */
var objectProto$7 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$6 = objectProto$7.hasOwnProperty;

/**
 * Creates an array of the enumerable property names of the array-like `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @param {boolean} inherited Specify returning inherited property names.
 * @returns {Array} Returns the array of property names.
 */
function arrayLikeKeys(value, inherited) {
  var isArr = isArray_1(value),
      isArg = !isArr && isArguments_1(value),
      isBuff = !isArr && !isArg && isBuffer_1(value),
      isType = !isArr && !isArg && !isBuff && isTypedArray_1(value),
      skipIndexes = isArr || isArg || isBuff || isType,
      result = skipIndexes ? _baseTimes(value.length, String) : [],
      length = result.length;

  for (var key in value) {
    if ((inherited || hasOwnProperty$6.call(value, key)) &&
        !(skipIndexes && (
           // Safari 9 has enumerable `arguments.length` in strict mode.
           key == 'length' ||
           // Node.js 0.10 has enumerable non-index properties on buffers.
           (isBuff && (key == 'offset' || key == 'parent')) ||
           // PhantomJS 2 has enumerable non-index properties on typed arrays.
           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||
           // Skip index properties.
           _isIndex(key, length)
        ))) {
      result.push(key);
    }
  }
  return result;
}

var _arrayLikeKeys = arrayLikeKeys;

/** Used for built-in method references. */
var objectProto$8 = Object.prototype;

/**
 * Checks if `value` is likely a prototype object.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
 */
function isPrototype(value) {
  var Ctor = value && value.constructor,
      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$8;

  return value === proto;
}

var _isPrototype = isPrototype;

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

var _overArg = overArg;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeKeys = _overArg(Object.keys, Object);

var _nativeKeys = nativeKeys;

/** Used for built-in method references. */
var objectProto$9 = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$7 = objectProto$9.hasOwnProperty;

/**
 * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function baseKeys(object) {
  if (!_isPrototype(object)) {
    return _nativeKeys(object);
  }
  var result = [];
  for (var key in Object(object)) {
    if (hasOwnProperty$7.call(object, key) && key != 'constructor') {
      result.push(key);
    }
  }
  return result;
}

var _baseKeys = baseKeys;

/**
 * Checks if `value` is array-like. A value is considered array-like if it's
 * not a function and has a `value.length` that's an integer greater than or
 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 * @example
 *
 * _.isArrayLike([1, 2, 3]);
 * // => true
 *
 * _.isArrayLike(document.body.children);
 * // => true
 *
 * _.isArrayLike('abc');
 * // => true
 *
 * _.isArrayLike(_.noop);
 * // => false
 */
function isArrayLike(value) {
  return value != null && isLength_1(value.length) && !isFunction_1(value);
}

var isArrayLike_1 = isArrayLike;

/**
 * Creates an array of the own enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects. See the
 * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
 * for more details.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keys(new Foo);
 * // => ['a', 'b'] (iteration order is not guaranteed)
 *
 * _.keys('hi');
 * // => ['0', '1']
 */
function keys(object) {
  return isArrayLike_1(object) ? _arrayLikeKeys(object) : _baseKeys(object);
}

var keys_1 = keys;

/**
 * The base implementation of `_.assign` without support for multiple sources
 * or `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @returns {Object} Returns `object`.
 */
function baseAssign(object, source) {
  return object && _copyObject(source, keys_1(source), object);
}

var _baseAssign = baseAssign;

/**
 * This function is like
 * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
 * except that it includes inherited enumerable properties.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function nativeKeysIn(object) {
  var result = [];
  if (object != null) {
    for (var key in Object(object)) {
      result.push(key);
    }
  }
  return result;
}

var _nativeKeysIn = nativeKeysIn;

/** Used for built-in method references. */
var objectProto$a = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$8 = objectProto$a.hasOwnProperty;

/**
 * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function baseKeysIn(object) {
  if (!isObject_1(object)) {
    return _nativeKeysIn(object);
  }
  var isProto = _isPrototype(object),
      result = [];

  for (var key in object) {
    if (!(key == 'constructor' && (isProto || !hasOwnProperty$8.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}

var _baseKeysIn = baseKeysIn;

/**
 * Creates an array of the own and inherited enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keysIn(new Foo);
 * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
 */
function keysIn$1(object) {
  return isArrayLike_1(object) ? _arrayLikeKeys(object, true) : _baseKeysIn(object);
}

var keysIn_1 = keysIn$1;

/**
 * The base implementation of `_.assignIn` without support for multiple sources
 * or `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @returns {Object} Returns `object`.
 */
function baseAssignIn(object, source) {
  return object && _copyObject(source, keysIn_1(source), object);
}

var _baseAssignIn = baseAssignIn;

var _cloneBuffer = createCommonjsModule(function (module, exports) {
/** Detect free variable `exports`. */
var freeExports = exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Built-in value references. */
var Buffer = moduleExports ? _root.Buffer : undefined,
    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;

/**
 * Creates a clone of  `buffer`.
 *
 * @private
 * @param {Buffer} buffer The buffer to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Buffer} Returns the cloned buffer.
 */
function cloneBuffer(buffer, isDeep) {
  if (isDeep) {
    return buffer.slice();
  }
  var length = buffer.length,
      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);

  buffer.copy(result);
  return result;
}

module.exports = cloneBuffer;
});

/**
 * Copies the values of `source` to `array`.
 *
 * @private
 * @param {Array} source The array to copy values from.
 * @param {Array} [array=[]] The array to copy values to.
 * @returns {Array} Returns `array`.
 */
function copyArray(source, array) {
  var index = -1,
      length = source.length;

  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}

var _copyArray = copyArray;

/**
 * A specialized version of `_.filter` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {Array} Returns the new filtered array.
 */
function arrayFilter(array, predicate) {
  var index = -1,
      length = array == null ? 0 : array.length,
      resIndex = 0,
      result = [];

  while (++index < length) {
    var value = array[index];
    if (predicate(value, index, array)) {
      result[resIndex++] = value;
    }
  }
  return result;
}

var _arrayFilter = arrayFilter;

/**
 * This method returns a new empty array.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {Array} Returns the new empty array.
 * @example
 *
 * var arrays = _.times(2, _.stubArray);
 *
 * console.log(arrays);
 * // => [[], []]
 *
 * console.log(arrays[0] === arrays[1]);
 * // => false
 */
function stubArray() {
  return [];
}

var stubArray_1 = stubArray;

/** Used for built-in method references. */
var objectProto$b = Object.prototype;

/** Built-in value references. */
var propertyIsEnumerable$1 = objectProto$b.propertyIsEnumerable;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeGetSymbols = Object.getOwnPropertySymbols;

/**
 * Creates an array of the own enumerable symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of symbols.
 */
var getSymbols = !nativeGetSymbols ? stubArray_1 : function(object) {
  if (object == null) {
    return [];
  }
  object = Object(object);
  return _arrayFilter(nativeGetSymbols(object), function(symbol) {
    return propertyIsEnumerable$1.call(object, symbol);
  });
};

var _getSymbols = getSymbols;

/**
 * Copies own symbols of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy symbols from.
 * @param {Object} [object={}] The object to copy symbols to.
 * @returns {Object} Returns `object`.
 */
function copySymbols(source, object) {
  return _copyObject(source, _getSymbols(source), object);
}

var _copySymbols = copySymbols;

/**
 * Appends the elements of `values` to `array`.
 *
 * @private
 * @param {Array} array The array to modify.
 * @param {Array} values The values to append.
 * @returns {Array} Returns `array`.
 */
function arrayPush(array, values) {
  var index = -1,
      length = values.length,
      offset = array.length;

  while (++index < length) {
    array[offset + index] = values[index];
  }
  return array;
}

var _arrayPush = arrayPush;

/** Built-in value references. */
var getPrototype = _overArg(Object.getPrototypeOf, Object);

var _getPrototype = getPrototype;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeGetSymbols$1 = Object.getOwnPropertySymbols;

/**
 * Creates an array of the own and inherited enumerable symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of symbols.
 */
var getSymbolsIn = !nativeGetSymbols$1 ? stubArray_1 : function(object) {
  var result = [];
  while (object) {
    _arrayPush(result, _getSymbols(object));
    object = _getPrototype(object);
  }
  return result;
};

var _getSymbolsIn = getSymbolsIn;

/**
 * Copies own and inherited symbols of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy symbols from.
 * @param {Object} [object={}] The object to copy symbols to.
 * @returns {Object} Returns `object`.
 */
function copySymbolsIn(source, object) {
  return _copyObject(source, _getSymbolsIn(source), object);
}

var _copySymbolsIn = copySymbolsIn;

/**
 * The base implementation of `getAllKeys` and `getAllKeysIn` which uses
 * `keysFunc` and `symbolsFunc` to get the enumerable property names and
 * symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @param {Function} symbolsFunc The function to get the symbols of `object`.
 * @returns {Array} Returns the array of property names and symbols.
 */
function baseGetAllKeys(object, keysFunc, symbolsFunc) {
  var result = keysFunc(object);
  return isArray_1(object) ? result : _arrayPush(result, symbolsFunc(object));
}

var _baseGetAllKeys = baseGetAllKeys;

/**
 * Creates an array of own enumerable property names and symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names and symbols.
 */
function getAllKeys(object) {
  return _baseGetAllKeys(object, keys_1, _getSymbols);
}

var _getAllKeys = getAllKeys;

/**
 * Creates an array of own and inherited enumerable property names and
 * symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names and symbols.
 */
function getAllKeysIn(object) {
  return _baseGetAllKeys(object, keysIn_1, _getSymbolsIn);
}

var _getAllKeysIn = getAllKeysIn;

/* Built-in method references that are verified to be native. */
var DataView = _getNative(_root, 'DataView');

var _DataView = DataView;

/* Built-in method references that are verified to be native. */
var Promise = _getNative(_root, 'Promise');

var _Promise = Promise;

/* Built-in method references that are verified to be native. */
var Set$1 = _getNative(_root, 'Set');

var _Set = Set$1;

/* Built-in method references that are verified to be native. */
var WeakMap = _getNative(_root, 'WeakMap');

var _WeakMap = WeakMap;

/** `Object#toString` result references. */
var mapTag$1 = '[object Map]',
    objectTag$1 = '[object Object]',
    promiseTag = '[object Promise]',
    setTag$1 = '[object Set]',
    weakMapTag$1 = '[object WeakMap]';

var dataViewTag$1 = '[object DataView]';

/** Used to detect maps, sets, and weakmaps. */
var dataViewCtorString = _toSource(_DataView),
    mapCtorString = _toSource(_Map),
    promiseCtorString = _toSource(_Promise),
    setCtorString = _toSource(_Set),
    weakMapCtorString = _toSource(_WeakMap);

/**
 * Gets the `toStringTag` of `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
var getTag = _baseGetTag;

// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.
if ((_DataView && getTag(new _DataView(new ArrayBuffer(1))) != dataViewTag$1) ||
    (_Map && getTag(new _Map) != mapTag$1) ||
    (_Promise && getTag(_Promise.resolve()) != promiseTag) ||
    (_Set && getTag(new _Set) != setTag$1) ||
    (_WeakMap && getTag(new _WeakMap) != weakMapTag$1)) {
  getTag = function(value) {
    var result = _baseGetTag(value),
        Ctor = result == objectTag$1 ? value.constructor : undefined,
        ctorString = Ctor ? _toSource(Ctor) : '';

    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString: return dataViewTag$1;
        case mapCtorString: return mapTag$1;
        case promiseCtorString: return promiseTag;
        case setCtorString: return setTag$1;
        case weakMapCtorString: return weakMapTag$1;
      }
    }
    return result;
  };
}

var _getTag = getTag;

/** Used for built-in method references. */
var objectProto$c = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty$9 = objectProto$c.hasOwnProperty;

/**
 * Initializes an array clone.
 *
 * @private
 * @param {Array} array The array to clone.
 * @returns {Array} Returns the initialized clone.
 */
function initCloneArray(array) {
  var length = array.length,
      result = new array.constructor(length);

  // Add properties assigned by `RegExp#exec`.
  if (length && typeof array[0] == 'string' && hasOwnProperty$9.call(array, 'index')) {
    result.index = array.index;
    result.input = array.input;
  }
  return result;
}

var _initCloneArray = initCloneArray;

/** Built-in value references. */
var Uint8Array = _root.Uint8Array;

var _Uint8Array = Uint8Array;

/**
 * Creates a clone of `arrayBuffer`.
 *
 * @private
 * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
 * @returns {ArrayBuffer} Returns the cloned array buffer.
 */
function cloneArrayBuffer(arrayBuffer) {
  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
  new _Uint8Array(result).set(new _Uint8Array(arrayBuffer));
  return result;
}

var _cloneArrayBuffer = cloneArrayBuffer;

/**
 * Creates a clone of `dataView`.
 *
 * @private
 * @param {Object} dataView The data view to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Object} Returns the cloned data view.
 */
function cloneDataView(dataView, isDeep) {
  var buffer = isDeep ? _cloneArrayBuffer(dataView.buffer) : dataView.buffer;
  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
}

var _cloneDataView = cloneDataView;

/** Used to match `RegExp` flags from their coerced string values. */
var reFlags = /\w*$/;

/**
 * Creates a clone of `regexp`.
 *
 * @private
 * @param {Object} regexp The regexp to clone.
 * @returns {Object} Returns the cloned regexp.
 */
function cloneRegExp(regexp) {
  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
  result.lastIndex = regexp.lastIndex;
  return result;
}

var _cloneRegExp = cloneRegExp;

/** Used to convert symbols to primitives and strings. */
var symbolProto = _Symbol ? _Symbol.prototype : undefined,
    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;

/**
 * Creates a clone of the `symbol` object.
 *
 * @private
 * @param {Object} symbol The symbol object to clone.
 * @returns {Object} Returns the cloned symbol object.
 */
function cloneSymbol(symbol) {
  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
}

var _cloneSymbol = cloneSymbol;

/**
 * Creates a clone of `typedArray`.
 *
 * @private
 * @param {Object} typedArray The typed array to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Object} Returns the cloned typed array.
 */
function cloneTypedArray(typedArray, isDeep) {
  var buffer = isDeep ? _cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
}

var _cloneTypedArray = cloneTypedArray;

/** `Object#toString` result references. */
var boolTag$1 = '[object Boolean]',
    dateTag$1 = '[object Date]',
    mapTag$2 = '[object Map]',
    numberTag$1 = '[object Number]',
    regexpTag$1 = '[object RegExp]',
    setTag$2 = '[object Set]',
    stringTag$1 = '[object String]',
    symbolTag = '[object Symbol]';

var arrayBufferTag$1 = '[object ArrayBuffer]',
    dataViewTag$2 = '[object DataView]',
    float32Tag$1 = '[object Float32Array]',
    float64Tag$1 = '[object Float64Array]',
    int8Tag$1 = '[object Int8Array]',
    int16Tag$1 = '[object Int16Array]',
    int32Tag$1 = '[object Int32Array]',
    uint8Tag$1 = '[object Uint8Array]',
    uint8ClampedTag$1 = '[object Uint8ClampedArray]',
    uint16Tag$1 = '[object Uint16Array]',
    uint32Tag$1 = '[object Uint32Array]';

/**
 * Initializes an object clone based on its `toStringTag`.
 *
 * **Note:** This function only supports cloning values with tags of
 * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.
 *
 * @private
 * @param {Object} object The object to clone.
 * @param {string} tag The `toStringTag` of the object to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Object} Returns the initialized clone.
 */
function initCloneByTag(object, tag, isDeep) {
  var Ctor = object.constructor;
  switch (tag) {
    case arrayBufferTag$1:
      return _cloneArrayBuffer(object);

    case boolTag$1:
    case dateTag$1:
      return new Ctor(+object);

    case dataViewTag$2:
      return _cloneDataView(object, isDeep);

    case float32Tag$1: case float64Tag$1:
    case int8Tag$1: case int16Tag$1: case int32Tag$1:
    case uint8Tag$1: case uint8ClampedTag$1: case uint16Tag$1: case uint32Tag$1:
      return _cloneTypedArray(object, isDeep);

    case mapTag$2:
      return new Ctor;

    case numberTag$1:
    case stringTag$1:
      return new Ctor(object);

    case regexpTag$1:
      return _cloneRegExp(object);

    case setTag$2:
      return new Ctor;

    case symbolTag:
      return _cloneSymbol(object);
  }
}

var _initCloneByTag = initCloneByTag;

/** Built-in value references. */
var objectCreate = Object.create;

/**
 * The base implementation of `_.create` without support for assigning
 * properties to the created object.
 *
 * @private
 * @param {Object} proto The object to inherit from.
 * @returns {Object} Returns the new object.
 */
var baseCreate = (function() {
  function object() {}
  return function(proto) {
    if (!isObject_1(proto)) {
      return {};
    }
    if (objectCreate) {
      return objectCreate(proto);
    }
    object.prototype = proto;
    var result = new object;
    object.prototype = undefined;
    return result;
  };
}());

var _baseCreate = baseCreate;

/**
 * Initializes an object clone.
 *
 * @private
 * @param {Object} object The object to clone.
 * @returns {Object} Returns the initialized clone.
 */
function initCloneObject(object) {
  return (typeof object.constructor == 'function' && !_isPrototype(object))
    ? _baseCreate(_getPrototype(object))
    : {};
}

var _initCloneObject = initCloneObject;

/** `Object#toString` result references. */
var mapTag$3 = '[object Map]';

/**
 * The base implementation of `_.isMap` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a map, else `false`.
 */
function baseIsMap(value) {
  return isObjectLike_1(value) && _getTag(value) == mapTag$3;
}

var _baseIsMap = baseIsMap;

/* Node.js helper references. */
var nodeIsMap = _nodeUtil && _nodeUtil.isMap;

/**
 * Checks if `value` is classified as a `Map` object.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a map, else `false`.
 * @example
 *
 * _.isMap(new Map);
 * // => true
 *
 * _.isMap(new WeakMap);
 * // => false
 */
var isMap = nodeIsMap ? _baseUnary(nodeIsMap) : _baseIsMap;

var isMap_1 = isMap;

/** `Object#toString` result references. */
var setTag$3 = '[object Set]';

/**
 * The base implementation of `_.isSet` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a set, else `false`.
 */
function baseIsSet(value) {
  return isObjectLike_1(value) && _getTag(value) == setTag$3;
}

var _baseIsSet = baseIsSet;

/* Node.js helper references. */
var nodeIsSet = _nodeUtil && _nodeUtil.isSet;

/**
 * Checks if `value` is classified as a `Set` object.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a set, else `false`.
 * @example
 *
 * _.isSet(new Set);
 * // => true
 *
 * _.isSet(new WeakSet);
 * // => false
 */
var isSet = nodeIsSet ? _baseUnary(nodeIsSet) : _baseIsSet;

var isSet_1 = isSet;

/** Used to compose bitmasks for cloning. */
var CLONE_DEEP_FLAG = 1,
    CLONE_FLAT_FLAG = 2,
    CLONE_SYMBOLS_FLAG = 4;

/** `Object#toString` result references. */
var argsTag$2 = '[object Arguments]',
    arrayTag$1 = '[object Array]',
    boolTag$2 = '[object Boolean]',
    dateTag$2 = '[object Date]',
    errorTag$1 = '[object Error]',
    funcTag$2 = '[object Function]',
    genTag$1 = '[object GeneratorFunction]',
    mapTag$4 = '[object Map]',
    numberTag$2 = '[object Number]',
    objectTag$2 = '[object Object]',
    regexpTag$2 = '[object RegExp]',
    setTag$4 = '[object Set]',
    stringTag$2 = '[object String]',
    symbolTag$1 = '[object Symbol]',
    weakMapTag$2 = '[object WeakMap]';

var arrayBufferTag$2 = '[object ArrayBuffer]',
    dataViewTag$3 = '[object DataView]',
    float32Tag$2 = '[object Float32Array]',
    float64Tag$2 = '[object Float64Array]',
    int8Tag$2 = '[object Int8Array]',
    int16Tag$2 = '[object Int16Array]',
    int32Tag$2 = '[object Int32Array]',
    uint8Tag$2 = '[object Uint8Array]',
    uint8ClampedTag$2 = '[object Uint8ClampedArray]',
    uint16Tag$2 = '[object Uint16Array]',
    uint32Tag$2 = '[object Uint32Array]';

/** Used to identify `toStringTag` values supported by `_.clone`. */
var cloneableTags = {};
cloneableTags[argsTag$2] = cloneableTags[arrayTag$1] =
cloneableTags[arrayBufferTag$2] = cloneableTags[dataViewTag$3] =
cloneableTags[boolTag$2] = cloneableTags[dateTag$2] =
cloneableTags[float32Tag$2] = cloneableTags[float64Tag$2] =
cloneableTags[int8Tag$2] = cloneableTags[int16Tag$2] =
cloneableTags[int32Tag$2] = cloneableTags[mapTag$4] =
cloneableTags[numberTag$2] = cloneableTags[objectTag$2] =
cloneableTags[regexpTag$2] = cloneableTags[setTag$4] =
cloneableTags[stringTag$2] = cloneableTags[symbolTag$1] =
cloneableTags[uint8Tag$2] = cloneableTags[uint8ClampedTag$2] =
cloneableTags[uint16Tag$2] = cloneableTags[uint32Tag$2] = true;
cloneableTags[errorTag$1] = cloneableTags[funcTag$2] =
cloneableTags[weakMapTag$2] = false;

/**
 * The base implementation of `_.clone` and `_.cloneDeep` which tracks
 * traversed objects.
 *
 * @private
 * @param {*} value The value to clone.
 * @param {boolean} bitmask The bitmask flags.
 *  1 - Deep clone
 *  2 - Flatten inherited properties
 *  4 - Clone symbols
 * @param {Function} [customizer] The function to customize cloning.
 * @param {string} [key] The key of `value`.
 * @param {Object} [object] The parent object of `value`.
 * @param {Object} [stack] Tracks traversed objects and their clone counterparts.
 * @returns {*} Returns the cloned value.
 */
function baseClone(value, bitmask, customizer, key, object, stack) {
  var result,
      isDeep = bitmask & CLONE_DEEP_FLAG,
      isFlat = bitmask & CLONE_FLAT_FLAG,
      isFull = bitmask & CLONE_SYMBOLS_FLAG;

  if (customizer) {
    result = object ? customizer(value, key, object, stack) : customizer(value);
  }
  if (result !== undefined) {
    return result;
  }
  if (!isObject_1(value)) {
    return value;
  }
  var isArr = isArray_1(value);
  if (isArr) {
    result = _initCloneArray(value);
    if (!isDeep) {
      return _copyArray(value, result);
    }
  } else {
    var tag = _getTag(value),
        isFunc = tag == funcTag$2 || tag == genTag$1;

    if (isBuffer_1(value)) {
      return _cloneBuffer(value, isDeep);
    }
    if (tag == objectTag$2 || tag == argsTag$2 || (isFunc && !object)) {
      result = (isFlat || isFunc) ? {} : _initCloneObject(value);
      if (!isDeep) {
        return isFlat
          ? _copySymbolsIn(value, _baseAssignIn(result, value))
          : _copySymbols(value, _baseAssign(result, value));
      }
    } else {
      if (!cloneableTags[tag]) {
        return object ? value : {};
      }
      result = _initCloneByTag(value, tag, isDeep);
    }
  }
  // Check for circular references and return its corresponding clone.
  stack || (stack = new _Stack);
  var stacked = stack.get(value);
  if (stacked) {
    return stacked;
  }
  stack.set(value, result);

  if (isSet_1(value)) {
    value.forEach(function(subValue) {
      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
    });

    return result;
  }

  if (isMap_1(value)) {
    value.forEach(function(subValue, key) {
      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
    });

    return result;
  }

  var keysFunc = isFull
    ? (isFlat ? _getAllKeysIn : _getAllKeys)
    : (isFlat ? keysIn : keys_1);

  var props = isArr ? undefined : keysFunc(value);
  _arrayEach(props || value, function(subValue, key) {
    if (props) {
      key = subValue;
      subValue = value[key];
    }
    // Recursively populate clone (susceptible to call stack limits).
    _assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
  });
  return result;
}

var _baseClone = baseClone;

/** Used to compose bitmasks for cloning. */
var CLONE_DEEP_FLAG$1 = 1,
    CLONE_SYMBOLS_FLAG$1 = 4;

/**
 * This method is like `_.clone` except that it recursively clones `value`.
 *
 * @static
 * @memberOf _
 * @since 1.0.0
 * @category Lang
 * @param {*} value The value to recursively clone.
 * @returns {*} Returns the deep cloned value.
 * @see _.clone
 * @example
 *
 * var objects = [{ 'a': 1 }, { 'b': 2 }];
 *
 * var deep = _.cloneDeep(objects);
 * console.log(deep[0] === objects[0]);
 * // => false
 */
function cloneDeep$1(value) {
  return _baseClone(value, CLONE_DEEP_FLAG$1 | CLONE_SYMBOLS_FLAG$1);
}

var cloneDeep_1 = cloneDeep$1;

/**
 * passive, preventDefault
 */

var isPassiveSupported = function () {
  var status = false;

  try {
    var opts = Object.defineProperty({}, "passive", {
      get: function get() {
        status = true;
        return;
      }
    });
    window.addEventListener('test', null, opts);
  } catch (err) {
    console.log(err);
  }

  return status;
}();
/**
 * 
 */

var hasOwn = function hasOwn(target, key) {
  return Object.prototype.hasOwnProperty.call(target, key);
};
/**
 * getUid
 */

var now = +new Date();
var index = 0;
var getUid = function getUid() {
  return "vm-".concat(now, "-").concat(++index);
};
/**
 * NaN
 */

/* eslint-disable no-self-compare */

var valueIsNaN = function valueIsNaN(v) {
  return v !== v;
};
/**
 * vue
 */

var clearCtor = function clearCtor(obj) {
  var target = cloneDeep(obj);

  for (var key in target) {
    if (target[key]._Ctor) {
      target[key]._Ctor = null;
    }
  }

  return target;
};
/**
 * 
 * @exceptions {
 *    id,
 *    tagName,
 *    className,
 *    ...HTMLElement
 * }
 */

var eleInRegExp = function eleInRegExp(el, exceptions) {
  for (var i in exceptions) {
    if (exceptions[i].test(el[i])) {
      return true;
    }
  }

  return false;
};

//
var doc$1 = document.documentElement;
var angleArr = [0, 45, 90, 135, 180, 225, 270, 315, 360];
var script = {
  replace: true,
  name: 'vm-draggable',
  props: {
    disabled: {
      type: Boolean,
      default: false
    },
    handles: {
      type: Array,
      default: function _default() {
        return ['top', 'right', 'bottom', 'left', 'top-left', 'top-right', 'bottom-right', 'bottom-left', 'rotate'];
      }
    },
    // 
    w: {
      type: Number,
      default: 0,
      validator: function validator(val) {
        return val >= 0;
      }
    },
    // 
    h: {
      type: Number,
      default: 0,
      validator: function validator(val) {
        return val >= 0;
      }
    },
    // 
    r: {
      type: Number,
      default: 0
    },
    // 
    minw: {
      type: Number,
      default: 36,
      validator: function validator(val) {
        return val > 0;
      }
    },
    // 
    minh: {
      type: Number,
      default: 36,
      validator: function validator(val) {
        return val > 0;
      }
    },
    // X
    x: {
      type: Number,
      default: 0
    },
    // Y
    y: {
      type: Number,
      default: 0
    },
    // zIndex
    z: {
      type: Number,
      default: 1
    },
    zoom: {
      type: Number,
      default: 1
    },
    grid: {
      type: Array,
      default: function _default() {
        return [1, 1];
      }
    },
    // 
    restrain: {
      type: Number,
      default: 0
    },
    parent: {
      type: Boolean,
      default: false
    },
    editorRegExp: {
      type: Object,
      default: function _default() {
        return {
          className: /vm-hack-editor/
        };
      }
    },

    /**
     * 
     */
    prevent: {
      type: Boolean,
      default: true
    },
    preventRegExp: {
      type: Object,
      default: function _default() {
        return {
          tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|OPTION)$/,
          className: /vm-hack-pevent/
        };
      }
    }
  },
  data: function data() {
    return {
      resizable: false,
      draggable: false,
      rotatable: false,
      changing: false,
      active: false
    };
  },
  computed: {
    coord: function coord() {
      return {
        left: this.x + 'px',
        top: this.y + 'px',
        zIndex: this.z
      };
    },
    style: function style() {
      var w = this.w === 0 ? 'auto' : "".concat(this.w, "px");
      var h = this.h === 0 ? 'auto' : "".concat(this.h, "px");
      return {
        width: w,
        height: h,
        transform: "rotate(".concat(this.r, "deg)")
      };
    },
    width: function width() {
      var num = Math.floor(Math.sqrt(this.w * this.w + this.h * this.h) * 1.15);
      return "".concat(num, "px");
    }
  },
  watch: {},
  beforeCreate: function beforeCreate() {
    this.parentX = 0;
    this.parentY = 0;
    this.parentW = 9999;
    this.parentH = 9999;
    this.mouseX = 0;
    this.mouseY = 0;
    this.lastMouseX = 0;
    this.lastMouseY = 0;
    this.mouseOffX = 0;
    this.mouseOffY = 0;
    this.handle = null; // 

    this.eventOpts = !isPassiveSupported || {
      capture: true,
      passive: true
    }; // 

    this.beforeStatus = null;
  },
  mounted: function mounted() {
    // , todo: 
    if (this.w && this.minw > this.w) {
      this.sync({
        w: this.minw
      });
    }

    if (this.h && this.minh > this.h) {
      this.sync({
        h: this.minh
      });
    }

    var _this$$el$parentNode$ = this.$el.parentNode.getBoundingClientRect(),
        x = _this$$el$parentNode$.x,
        y = _this$$el$parentNode$.y;

    this.parentX = x;
    this.parentY = y; // 

    this.parent && this.calculation();
    this.$emit('resizing');
  },
  destroyed: function destroyed() {
    this.operateDOMEvents('remove');
  },
  methods: {
    calculation: function calculation() {
      var _this$$el$parentNode$2 = this.$el.parentNode.getBoundingClientRect(),
          width = _this$$el$parentNode$2.width,
          height = _this$$el$parentNode$2.height;

      this.parentW = width;
      this.parentH = height; // this.$el.parentNode.clientHeight

      if (this.w > this.parentW) {
        this.sync({
          w: this.parentW
        });
      }

      if (this.h > this.parentH) {
        this.sync({
          h: this.parentH
        });
      }

      if (this.x + this.w > this.parentW) {
        this.sync({
          x: this.parentW - this.w
        });
      }

      if (this.y + this.h > this.parentH) {
        this.sync({
          y: this.parentH - this.h
        });
      }
    },
    sync: function sync(opts) {
      for (var key in opts) {
        if (this[key] != opts[key]) {
          !this.beforeStatus && (this.beforeStatus = {
            x: this.x,
            y: this.y,
            z: this.z,
            w: this.w,
            r: this.r
          });
          this.$emit("update:".concat(key), opts[key]);
        }
      }
    },
    operateDOMEvents: function operateDOMEvents(type) {
      var fn = type === 'add' ? doc$1.addEventListener : doc$1.removeEventListener;
      fn('mousedown', this.handleDeselect, this.eventOpts);
      fn('mousemove', this.handleMove, this.eventOpts);
      fn('mouseup', this.handleUp, this.eventOpts);
    },

    /**
     * active
     */
    setActived: function setActived() {
      this.handleContainerDown();
      this.handleUp();
    },

    /**
     * 
     */
    handleContainerDown: function handleContainerDown() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      //  todo: 
      this.prevent && e.preventDefault && !eleInRegExp(e.target, this.preventRegExp) && e.preventDefault(); // 

      if (this.disabled) { return; }
      var target = e.target || e.srcElement; // 

      if (!target || this.$el.contains(target)) {
        if (!this.active) {
          this.lastMouseX = e.pageX || e.clientX + doc$1.scrollLeft;
          this.lastMouseY = e.pageY || e.clientY + doc$1.scrollTop; // 

          this.operateDOMEvents('add');
          this.active = true;
          this.$emit('activated');
        }

        this.draggable = true;
      }
    },

    /**
     * 
     */
    handleDeselect: function handleDeselect(e) {
      var _this = this;

      this.mouseX = e.pageX || e.clientX + doc$1.scrollLeft;
      this.mouseY = e.pageY || e.clientY + doc$1.scrollTop;
      this.lastMouseX = this.mouseX;
      this.lastMouseY = this.mouseY;
      var target = e.target || e.srcElement; // bodyclass, 
      // 

      var regex = {
        className: /is-([(top|right|-|bottom|left)]{2})/
      };
      var path = e.path || e.composedPath && e.composedPath() || [];

      if (!this.$el.contains(target) && !eleInRegExp(target, regex) && !path.some(function (item) {
        return eleInRegExp(item, _this.editorRegExp);
      })) {
        if (this.active) {
          // 
          this.operateDOMEvents('remove');
          this.active = false;
          this.$emit('deactivated');
        }
      }
    },

    /**
     * 
     */
    handleDown: function handleDown(e, handle) {
      //  todo: 
      this.prevent && e.preventDefault && !eleInRegExp(e.target, this.preventRegExp) && e.preventDefault(); // handle

      this.handle = handle;

      if (handle === 'rotate') {
        this.rotatable = true;
      } else {
        this.resizable = true;
      }

      this.preMouseX = e.pageX || e.clientX + doc$1.scrollLeft;
      this.preMouseY = e.pageY || e.clientY + doc$1.scrollTop;
    },

    /**
     * 
     */
    handleMove: function handleMove(e) {
      this.mouseX = e.pageX || e.clientX + doc$1.scrollLeft;
      this.mouseY = e.pageY || e.clientY + doc$1.scrollTop; // x, y, w, h

      var elmX = parseInt(this.x, 10);
      var elmY = parseInt(this.y, 10);
      var elmW = parseInt(this.w, 10);
      var elmH = parseInt(this.h, 10); // diffX =   -  + 

      var diffX = (this.mouseX - this.lastMouseX + this.mouseOffX) / this.zoom;
      var diffY = (this.mouseY - this.lastMouseY + this.mouseOffY) / this.zoom;
      this.mouseOffX = 0;
      this.mouseOffY = 0;
      this.lastMouseX = this.mouseX;
      this.lastMouseY = this.mouseY;

      if (this.resizable) {
        if (this.handle.includes('top')) {
          if (elmH - diffY < this.minh) {
            // 
            // diffY -> 0 , this.mouseOffYthis.y -> 
            this.mouseOffY = diffY - (diffY = elmH - this.minh);
          } else if (this.parent && elmY + diffY < 0) {
            //  
            // this.y  diffY -> 0, this.mouseOffYthis.y -> ()
            this.mouseOffY = diffY - (diffY = -elmY);
          }

          elmY += diffY;
          elmH -= diffY;
        }

        if (this.handle.includes('bottom')) {
          if (elmH + diffY < this.minh) {
            // 
            this.mouseOffY = diffY - (diffY = this.minh - elmH);
          } else if (elmY + elmH + diffY > this.parentH) {
            // 
            this.mouseOffY = diffY - (diffY = this.parentH - elmY - elmH);
          }

          elmH += diffY;
        }

        if (this.handle.includes('left')) {
          if (elmW - diffX < this.minw) {
            // 
            this.mouseOffX = diffX - (diffX = elmW - this.minw);
          } else if (this.parent && elmX + diffX < 0) {
            // 
            this.mouseOffX = diffX - (diffX = -elmX);
          }

          elmX += diffX;
          elmW -= diffX;
        }

        if (this.handle.includes('right')) {
          if (elmW + diffX < this.minw) {
            // 
            this.mouseOffX = diffX - (diffX = this.minw - elmW);
          } else if (elmX + elmW + diffX > this.parentW) {
            // 
            this.mouseOffX = diffX - (diffX = this.parentW - elmX - elmW);
          }

          elmW += diffX;
        }

        !this.disabled && this.sync({
          x: Math.round(elmX / this.grid[0]) * this.grid[0],
          y: Math.round(elmY / this.grid[1]) * this.grid[1],
          w: Math.round(elmW / this.grid[0]) * this.grid[0],
          h: Math.round(elmH / this.grid[1]) * this.grid[1]
        });
        this.$emit('resizing');
      } else if (this.rotatable) {
        var angle = this.getAngle([this.parentX + this.x + this.w / 2, -(this.parentY + this.y + this.h / 2)], [this.lastMouseX, -this.lastMouseY]);
        var criticalAngle = angleArr.find(function (item) {
          return Math.abs(item - angle) < 3;
        });
        angle = typeof criticalAngle === 'number' ? criticalAngle : angle;
        !this.disabled && this.sync({
          r: angle === 360 ? 0 : angle
        });
        this.$emit('rotating');
      } else if (this.draggable) {
        if (this.parent) {
          if (elmX + diffX < 0) {
            this.mouseOffX = diffX * this.zoom - (diffX = -elmX);
          } else if (elmX + elmW + diffX > this.parentW) {
            this.mouseOffX = diffX * this.zoom - (diffX = this.parentW - elmX - elmW);
          }

          if (elmY + diffY < 0) {
            this.mouseOffY = diffY * this.zoom - (diffY = -elmY);
          } else if (elmY + elmH + diffY > this.parentH) {
            this.mouseOffY = diffY * this.zoom - (diffY = this.parentH - elmY - elmH);
          }
        }

        elmX += diffX;
        elmY += diffY;
        !this.disabled && this.sync({
          x: Math.round(elmX / this.grid[0]) * this.grid[0],
          y: Math.round(elmY / this.grid[1]) * this.grid[1]
        });
        this.$emit('dragging');
      } // 


      !this.changing && (this.rotatable || this.draggable || this.resizable) && (this.changing = true);
    },
    getAngle: function getAngle(center, last) {
      var diffX = last[0] - center[0];
      var diffY = last[1] - center[1];
      /**
       * https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/atan2
       * -180 <= c < 180
       */

      var c = 360 * Math.atan2(diffY, diffX) / (2 * Math.PI);
      c = c > 90 ? 450 - c : // 4
      90 - c; // 123

      return Math.floor(c);
    },
    getRestrain: function getRestrain(num) {
      var restrain = this.restrain;
      return (num / restrain).toFixed(0) * restrain;
    },
    handleUp: function handleUp(e) {
      this.changing = false;
      this.handle = null; // 

      var restrain = this.restrain;

      if (restrain && restrain > 0) {
        this.sync({
          x: this.getRestrain(this.x),
          y: this.getRestrain(this.y),
          w: this.getRestrain(this.w),
          h: this.getRestrain(this.h)
        });
      }

      if (this.rotatable) {
        this.rotatable = false;
        this.$emit('rotate-end');
      }

      if (this.resizable) {
        this.resizable = false;
        this.$emit('resize-end');
      }

      if (this.draggable) {
        this.draggable = false;
        this.$emit('drag-end');
      }

      if (this.beforeStatus) {
        this.$emit('end', this.beforeStatus);
        this.beforeStatus = null;
      }
    }
  }
};

function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier
/* server only */
, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
  if (typeof shadowMode !== 'boolean') {
    createInjectorSSR = createInjector;
    createInjector = shadowMode;
    shadowMode = false;
  } // Vue.extend constructor export interop.


  var options = typeof script === 'function' ? script.options : script; // render functions

  if (template && template.render) {
    options.render = template.render;
    options.staticRenderFns = template.staticRenderFns;
    options._compiled = true; // functional template

    if (isFunctionalTemplate) {
      options.functional = true;
    }
  } // scopedId


  if (scopeId) {
    options._scopeId = scopeId;
  }

  var hook;

  if (moduleIdentifier) {
    // server build
    hook = function hook(context) {
      // 2.3 injection
      context = context || // cached call
      this.$vnode && this.$vnode.ssrContext || // stateful
      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional
      // 2.2 with runInNewContext: true

      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {
        context = __VUE_SSR_CONTEXT__;
      } // inject component styles


      if (style) {
        style.call(this, createInjectorSSR(context));
      } // register component module identifier for async chunk inference


      if (context && context._registeredComponents) {
        context._registeredComponents.add(moduleIdentifier);
      }
    }; // used by ssr in case component is cached and beforeCreate
    // never gets called


    options._ssrRegister = hook;
  } else if (style) {
    hook = shadowMode ? function () {
      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));
    } : function (context) {
      style.call(this, createInjector(context));
    };
  }

  if (hook) {
    if (options.functional) {
      // register for functional component in vue file
      var originalRender = options.render;

      options.render = function renderWithStyleInjection(h, context) {
        hook.call(context);
        return originalRender(h, context);
      };
    } else {
      // inject component registration as beforeCreate hook
      var existing = options.beforeCreate;
      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];
    }
  }

  return script;
}

var normalizeComponent_1 = normalizeComponent;

var isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
function createInjector(context) {
  return function (id, style) {
    return addStyle(id, style);
  };
}
var HEAD = document.head || document.getElementsByTagName('head')[0];
var styles = {};

function addStyle(id, css) {
  var group = isOldIE ? css.media || 'default' : id;
  var style = styles[group] || (styles[group] = {
    ids: new Set(),
    styles: []
  });

  if (!style.ids.has(id)) {
    style.ids.add(id);
    var code = css.source;

    if (css.map) {
      // https://developer.chrome.com/devtools/docs/javascript-debugging
      // this makes source maps inside style tags work properly in Chrome
      code += '\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875

      code += '\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';
    }

    if (!style.element) {
      style.element = document.createElement('style');
      style.element.type = 'text/css';
      if (css.media) { style.element.setAttribute('media', css.media); }
      HEAD.appendChild(style.element);
    }

    if ('styleSheet' in style.element) {
      style.styles.push(code);
      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\n');
    } else {
      var index = style.ids.size - 1;
      var textNode = document.createTextNode(code);
      var nodes = style.element.childNodes;
      if (nodes[index]) { style.element.removeChild(nodes[index]); }
      if (nodes.length) { style.element.insertBefore(textNode, nodes[index]); }else { style.element.appendChild(textNode); }
    }
  }
}

var browser = createInjector;

/* script */
var __vue_script__ = script;

/* template */
var __vue_render__ = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    {
      staticClass: "vm-draggable",
      style: _vm.coord,
      on: {
        mousedown: function($event) {
          $event.stopPropagation();
          return _vm.handleContainerDown($event)
        }
      }
    },
    [
      _c(
        "div",
        { class: { "is-events-none": _vm.changing }, style: _vm.style },
        [_vm._t("default")],
        2
      ),
      _vm._v(" "),
      _vm.active && _vm.handles && _vm.handles.length !== 0
        ? _c(
            "div",
            {
              class: { "is-disabled": _vm.disabled, "is-active": _vm.active },
              style: _vm.style
            },
            [
              _vm._l(_vm.handles, function(item) {
                return [
                  !_vm.disabled
                    ? _c("div", {
                        key: item,
                        staticClass: "vm-draggable__handle",
                        class: "is-" + item,
                        on: {
                          mousedown: function($event) {
                            if (
                              !$event.type.indexOf("key") &&
                              _vm._k($event.keyCode, "left", 37, $event.key, [
                                "Left",
                                "ArrowLeft"
                              ])
                            ) {
                              return null
                            }
                            if ("button" in $event && $event.button !== 0) {
                              return null
                            }
                            $event.stopPropagation();
                            return _vm.handleDown($event, item)
                          }
                        }
                      })
                    : _vm._e()
                ]
              }),
              _vm._v(" "),
              _vm.rotatable
                ? _c("div", {
                    staticClass: "vm-draggable__rotate",
                    style: { width: _vm.width }
                  })
                : _vm._e()
            ],
            2
          )
        : _vm._e(),
      _vm._v(" "),
      _vm.rotatable
        ? [
            _c("div", { staticClass: "is-deg-0", style: { width: _vm.width } }),
            _vm._v(" "),
            _c("div", {
              staticClass: "is-deg-45",
              style: { width: _vm.width }
            }),
            _vm._v(" "),
            _c("div", {
              staticClass: "is-deg-90",
              style: { width: _vm.width }
            }),
            _vm._v(" "),
            _c("div", {
              staticClass: "is-deg-135",
              style: { width: _vm.width }
            }),
            _vm._v(" "),
            _c("div", { staticClass: "is-deg-tip" }, [
              _vm._v(_vm._s(_vm.r) + " ")
            ])
          ]
        : _vm._e()
    ],
    2
  )
};
var __vue_staticRenderFns__ = [];
__vue_render__._withStripped = true;

  /* style */
  var __vue_inject_styles__ = function (inject) {
    if (!inject) { return }
    inject("data-v-659047b4_0", { source: "@charset \"UTF-8\";\n.vm-draggable {\n  padding: 0;\n  position: absolute;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.vm-draggable:hover {\n  cursor: move;\n}\n.vm-draggable .is-events-none {\n  pointer-events: none;\n}\n.vm-draggable .is-active {\n  padding: 0;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  position: absolute;\n  z-index: 2;\n  border: 1px dotted #108ee9;\n}\n.vm-draggable .is-active .vm-draggable__handle {\n  display: block;\n}\n.vm-draggable .is-disabled {\n  border: 1px dotted #e96101;\n}\n.vm-draggable .is-disabled .handle-rotate:after {\n  background: #e96101;\n}\n.vm-draggable .is-disabled .handle-rotate:before {\n  color: #e96101;\n}\n.vm-draggable .is-delete {\n  background: #108ee9;\n  position: absolute;\n  right: 0;\n  width: 20px;\n  color: white;\n  text-align: center;\n  z-index: 300;\n}\n.vm-draggable__handle {\n  display: none;\n  position: absolute;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  z-index: 999;\n}\n.vm-draggable__handle.is-left {\n  top: 0;\n  left: -5px;\n  cursor: ew-resize;\n  position: absolute;\n  height: 100%;\n  width: 5px;\n}\n.vm-draggable__handle.is-left:hover {\n  background: -webkit-gradient(linear, left top, right top, from(rgba(255, 255, 255, 0)), to(#3F51B5));\n  background: linear-gradient(to right, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-right {\n  top: 0;\n  right: -5px;\n  cursor: ew-resize;\n  position: absolute;\n  height: 100%;\n  width: 5px;\n}\n.vm-draggable__handle.is-right:hover {\n  background: -webkit-gradient(linear, right top, left top, from(rgba(255, 255, 255, 0)), to(#3F51B5));\n  background: linear-gradient(to left, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-top {\n  position: absolute;\n  width: 100%;\n  height: 5px;\n  top: -5px;\n  left: 0;\n  cursor: ns-resize;\n}\n.vm-draggable__handle.is-top:hover {\n  background: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0)), to(#3F51B5));\n  background: linear-gradient(to bottom, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-bottom {\n  position: absolute;\n  width: 100%;\n  height: 5px;\n  bottom: -5px;\n  left: 0;\n  cursor: ns-resize;\n}\n.vm-draggable__handle.is-bottom:hover {\n  background: -webkit-gradient(linear, left bottom, left top, from(rgba(255, 255, 255, 0)), to(#3F51B5));\n  background: linear-gradient(to top, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-top-left {\n  top: 0;\n  left: 0;\n  cursor: nwse-resize;\n  padding: 5px;\n}\n.vm-draggable__handle .is-bottom-left {\n  bottom: 0;\n  left: 0;\n  cursor: nesw-resize;\n  padding: 5px;\n}\n.vm-draggable__handle.is-top-right {\n  top: 0;\n  right: 0;\n  cursor: nesw-resize;\n  padding: 5px;\n}\n.vm-draggable__handle.is-bottom-right {\n  bottom: 0;\n  right: 0;\n  cursor: nwse-resize;\n  padding: 5px;\n}\n.vm-draggable__handle.is-rotate {\n  top: 0;\n  left: 50%;\n  -webkit-transform: translate(-50%, -100%);\n          transform: translate(-50%, -100%);\n  cursor: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" style=\"font-size: 20px;\"><text y=\"15\"></text></svg>') 10 10, default;\n  display: -webkit-box !important;\n  display: -ms-flexbox !important;\n  display: flex !important;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.vm-draggable__handle.is-rotate:after {\n  content: \" \";\n  height: 10px;\n  width: 1px;\n  background: #108ee9;\n}\n.vm-draggable__handle.is-rotate:before {\n  content: \"\";\n  -webkit-transform: translateY(26%);\n          transform: translateY(26%);\n  color: #108ee9;\n}\n\n/**\n * rotate\n */\n.vm-draggable__rotate {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  z-index: 2;\n  width: 500px;\n  border: 1px solid #1fb6ff;\n  background-color: #1fb6ff;\n  -webkit-transform: translate(-50%, -50%) rotate(90deg);\n          transform: translate(-50%, -50%) rotate(90deg);\n}\n.vm-draggable__rotate .is-deg-0 {\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.vm-draggable__rotate .is-deg-45 {\n  -webkit-transform: translate(-50%, -50%) rotate(45deg);\n          transform: translate(-50%, -50%) rotate(45deg);\n}\n.vm-draggable__rotate .is-deg-90 {\n  -webkit-transform: translate(-50%, -50%) rotate(90deg);\n          transform: translate(-50%, -50%) rotate(90deg);\n}\n.vm-draggable__rotate .is-deg-135 {\n  -webkit-transform: translate(-50%, -50%) rotate(135deg);\n          transform: translate(-50%, -50%) rotate(135deg);\n}\n.vm-draggable__rotate .is-deg-tip {\n  position: absolute;\n  top: -50px;\n  left: 60%;\n  width: 40px;\n  height: 16px;\n  line-height: 16px;\n  text-align: center;\n  border: 1px solid #262626;\n  border-radius: 8px;\n  background-color: #fff;\n}\n.vm-draggable__rotate div[class^=is-deg-] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 2;\n  width: 500px;\n  border-top: 1px dashed #fff;\n  border-bottom: 1px dashed #262626;\n  opacity: 0.4;\n}\n\n/*# sourceMappingURL=draggable.vue.map */", map: {"version":3,"sources":["draggable.vue","/Users/deot/Desktop/wya/github/wya-vm/src/core/draggable/draggable.vue"],"names":[],"mappings":"AAAA,gBAAgB;ACgfhB;EACA,UAAA;EACA,kBAAA;EACA,8BAAA;UAAA,sBAAA;EACA,yBAAA;KAAA,sBAAA;MAAA,qBAAA;UAAA,iBAAA;AD9eA;AC+eA;EACA,YAAA;AD7eA;AC+eA;EACA,oBAAA;AD7eA;AC+eA;EACA,UAAA;EACA,MAAA;EACA,OAAA;EACA,QAAA;EACA,SAAA;EACA,kBAAA;EACA,UAAA;EACA,0BAAA;AD7eA;AC+eA;EACA,cAAA;AD7eA;ACgfA;EACA,0BAAA;AD9eA;ACgfA;EACA,mBAAA;AD9eA;ACgfA;EACA,cAAA;AD9eA;ACkfA;EACA,mBAAA;EACA,kBAAA;EACA,QAAA;EACA,WAAA;EACA,YAAA;EACA,kBAAA;EACA,YAAA;ADhfA;ACofA;EACA,aAAA;EACA,kBAAA;EACA,8BAAA;UAAA,sBAAA;EACA,YAAA;ADjfA;ACkfA;EACA,MAAA;EACA,UAAA;EACA,iBAAA;EACA,kBAAA;EACA,YAAA;EACA,UAAA;ADhfA;ACifA;EACA,oGAAA;EAAA,sEAAA;AD/eA;ACkfA;EACA,MAAA;EACA,WAAA;EACA,iBAAA;EACA,kBAAA;EACA,YAAA;EACA,UAAA;ADhfA;ACifA;EACA,oGAAA;EAAA,qEAAA;AD/eA;ACmfA;EACA,kBAAA;EACA,WAAA;EACA,WAAA;EACA,SAAA;EACA,OAAA;EACA,iBAAA;ADjfA;ACkfA;EACA,sGAAA;EAAA,uEAAA;ADhfA;ACmfA;EACA,kBAAA;EACA,WAAA;EACA,WAAA;EACA,YAAA;EACA,OAAA;EACA,iBAAA;ADjfA;ACkfA;EACA,sGAAA;EAAA,oEAAA;ADhfA;ACmfA;EACA,MAAA;EACA,OAAA;EACA,mBAAA;EACA,YAAA;ADjfA;ACmfA;EACA,SAAA;EACA,OAAA;EACA,mBAAA;EACA,YAAA;ADjfA;ACmfA;EACA,MAAA;EACA,QAAA;EACA,mBAAA;EACA,YAAA;ADjfA;ACmfA;EACA,SAAA;EACA,QAAA;EACA,mBAAA;EACA,YAAA;ADjfA;ACmfA;EACA,MAAA;EACA,SAAA;EACA,yCAAA;UAAA,iCAAA;EACA,yKAAA;EACA,+BAAA;EAAA,+BAAA;EAAA,wBAAA;EACA,4BAAA;EAAA,6BAAA;MAAA,0BAAA;UAAA,sBAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,uBAAA;ADjfA;ACkfA;EACA,YAAA;EACA,YAAA;EACA,UAAA;EACA,mBAAA;ADhfA;ACkfA;EACA,YAAA;EACA,kCAAA;UAAA,0BAAA;EACA,cAAA;ADhfA;;ACqfA;;EAAA;AAGA;EACA,kBAAA;EACA,SAAA;EACA,QAAA;EACA,UAAA;EACA,YAAA;EACA,yBAAA;EACA,yBAAA;EACA,sDAAA;UAAA,8CAAA;ADlfA;ACmfA;EACA,wCAAA;UAAA,gCAAA;ADjfA;ACmfA;EACA,sDAAA;UAAA,8CAAA;ADjfA;ACmfA;EACA,sDAAA;UAAA,8CAAA;ADjfA;ACmfA;EACA,uDAAA;UAAA,+CAAA;ADjfA;ACmfA;EACA,kBAAA;EACA,UAAA;EACA,SAAA;EACA,WAAA;EACA,YAAA;EACA,iBAAA;EACA,kBAAA;EACA,yBAAA;EACA,kBAAA;EACA,sBAAA;ADjfA;ACmfA;EACA,kBAAA;EACA,QAAA;EACA,SAAA;EACA,UAAA;EACA,YAAA;EACA,2BAAA;EACA,iCAAA;EACA,YAAA;ADjfA;;AAEA,wCAAwC","file":"draggable.vue","sourcesContent":["@charset \"UTF-8\";\n.vm-draggable {\n  padding: 0;\n  position: absolute;\n  box-sizing: border-box;\n  user-select: none;\n}\n.vm-draggable:hover {\n  cursor: move;\n}\n.vm-draggable .is-events-none {\n  pointer-events: none;\n}\n.vm-draggable .is-active {\n  padding: 0;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  position: absolute;\n  z-index: 2;\n  border: 1px dotted #108ee9;\n}\n.vm-draggable .is-active .vm-draggable__handle {\n  display: block;\n}\n.vm-draggable .is-disabled {\n  border: 1px dotted #e96101;\n}\n.vm-draggable .is-disabled .handle-rotate:after {\n  background: #e96101;\n}\n.vm-draggable .is-disabled .handle-rotate:before {\n  color: #e96101;\n}\n.vm-draggable .is-delete {\n  background: #108ee9;\n  position: absolute;\n  right: 0;\n  width: 20px;\n  color: white;\n  text-align: center;\n  z-index: 300;\n}\n\n.vm-draggable__handle {\n  display: none;\n  position: absolute;\n  box-sizing: border-box;\n  z-index: 999;\n}\n.vm-draggable__handle.is-left {\n  top: 0;\n  left: -5px;\n  cursor: ew-resize;\n  position: absolute;\n  height: 100%;\n  width: 5px;\n}\n.vm-draggable__handle.is-left:hover {\n  background: linear-gradient(to right, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-right {\n  top: 0;\n  right: -5px;\n  cursor: ew-resize;\n  position: absolute;\n  height: 100%;\n  width: 5px;\n}\n.vm-draggable__handle.is-right:hover {\n  background: linear-gradient(to left, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-top {\n  position: absolute;\n  width: 100%;\n  height: 5px;\n  top: -5px;\n  left: 0;\n  cursor: ns-resize;\n}\n.vm-draggable__handle.is-top:hover {\n  background: linear-gradient(to bottom, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-bottom {\n  position: absolute;\n  width: 100%;\n  height: 5px;\n  bottom: -5px;\n  left: 0;\n  cursor: ns-resize;\n}\n.vm-draggable__handle.is-bottom:hover {\n  background: linear-gradient(to top, rgba(255, 255, 255, 0), #3F51B5);\n}\n.vm-draggable__handle.is-top-left {\n  top: 0;\n  left: 0;\n  cursor: nwse-resize;\n  padding: 5px;\n}\n.vm-draggable__handle .is-bottom-left {\n  bottom: 0;\n  left: 0;\n  cursor: nesw-resize;\n  padding: 5px;\n}\n.vm-draggable__handle.is-top-right {\n  top: 0;\n  right: 0;\n  cursor: nesw-resize;\n  padding: 5px;\n}\n.vm-draggable__handle.is-bottom-right {\n  bottom: 0;\n  right: 0;\n  cursor: nwse-resize;\n  padding: 5px;\n}\n.vm-draggable__handle.is-rotate {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -100%);\n  cursor: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" style=\"font-size: 20px;\"><text y=\"15\"></text></svg>') 10 10, default;\n  display: flex !important;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.vm-draggable__handle.is-rotate:after {\n  content: \" \";\n  height: 10px;\n  width: 1px;\n  background: #108ee9;\n}\n.vm-draggable__handle.is-rotate:before {\n  content: \"\";\n  transform: translateY(26%);\n  color: #108ee9;\n}\n\n/**\n * rotate\n */\n.vm-draggable__rotate {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  z-index: 2;\n  width: 500px;\n  border: 1px solid #1fb6ff;\n  background-color: #1fb6ff;\n  transform: translate(-50%, -50%) rotate(90deg);\n}\n.vm-draggable__rotate .is-deg-0 {\n  transform: translate(-50%, -50%);\n}\n.vm-draggable__rotate .is-deg-45 {\n  transform: translate(-50%, -50%) rotate(45deg);\n}\n.vm-draggable__rotate .is-deg-90 {\n  transform: translate(-50%, -50%) rotate(90deg);\n}\n.vm-draggable__rotate .is-deg-135 {\n  transform: translate(-50%, -50%) rotate(135deg);\n}\n.vm-draggable__rotate .is-deg-tip {\n  position: absolute;\n  top: -50px;\n  left: 60%;\n  width: 40px;\n  height: 16px;\n  line-height: 16px;\n  text-align: center;\n  border: 1px solid #262626;\n  border-radius: 8px;\n  background-color: #fff;\n}\n.vm-draggable__rotate div[class^=is-deg-] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 2;\n  width: 500px;\n  border-top: 1px dashed #fff;\n  border-bottom: 1px dashed #262626;\n  opacity: 0.4;\n}\n\n/*# sourceMappingURL=draggable.vue.map */","<template>\n\t<div :style=\"coord\" class=\"vm-draggable\" @mousedown.stop=\"handleContainerDown\">\n\t\t<div :style=\"style\" :class=\"{ 'is-events-none': changing }\" >\n\t\t\t<slot :style=\"style\"/>\n\t\t</div>\n\t\t<!-- handle -->\n\t\t<div \n\t\t\tv-if=\"active && handles && handles.length !== 0\" \n\t\t\t:class=\"{ 'is-disabled': disabled, 'is-active': active }\" \n\t\t\t:style=\"style\"\n\t\t>\n\t\t\t<template v-for=\"item in handles\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!disabled\"\n\t\t\t\t\t:key=\"item\"\n\t\t\t\t\t:class=\"`is-${item}`\"\n\t\t\t\t\tclass=\"vm-draggable__handle\"\n\t\t\t\t\t@mousedown.left.stop=\"handleDown($event, item)\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t\t<div v-if=\"rotatable\" :style=\"{ width }\" class=\"vm-draggable__rotate\"/>\n\t\t</div>\n\t\t<!-- grid for rotate -->\n\t\t<template v-if=\"rotatable\">\n\t\t\t<div :style=\"{ width }\" class=\"is-deg-0\" />\n\t\t\t<div :style=\"{ width }\" class=\"is-deg-45\" />\n\t\t\t<div :style=\"{ width }\" class=\"is-deg-90\" />\n\t\t\t<div :style=\"{ width }\" class=\"is-deg-135\" />\n\t\t\t<div class=\"is-deg-tip\">{{ r }} </div>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport { isPassiveSupported, eleInRegExp } from '../../utils/helper';\n\nconst doc = document.documentElement;\nconst angleArr = [0, 45, 90, 135, 180, 225, 270, 315, 360];\n\nexport default {\n\treplace: true,\n\tname: 'vm-draggable',\n\tprops: {\n\t\tdisabled: {\n\t\t\ttype: Boolean, \n\t\t\tdefault: false\n\t\t},\n\t\thandles: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => (['top', 'right', 'bottom', 'left', 'top-left', 'top-right', 'bottom-right', 'bottom-left', 'rotate'])\n\t\t},\n\t\t// \n\t\tw: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t\tvalidator: val => val >= 0\n\t\t},\n\t\t// \n\t\th: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t\tvalidator: val => val >= 0\n\t\t},\n\t\t// \n\t\tr: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t\t// \n\t\tminw: {\n\t\t\ttype: Number,\n\t\t\tdefault: 36,\n\t\t\tvalidator: val => val > 0\n\t\t},\n\t\t// \n\t\tminh: {\n\t\t\ttype: Number,\n\t\t\tdefault: 36,\n\t\t\tvalidator: val => val > 0\n\t\t},\n\t\t// X\n\t\tx: { \n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t\t// Y\n\t\ty: { \n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t\t// zIndex\n\t\tz: { \n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tzoom: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tgrid: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => {\n\t\t\t\treturn [1, 1];\n\t\t\t}\n\t\t},\n\t\t// \n\t\trestrain: {\n\t\t\ttype: Number, \n\t\t\tdefault: 0\n\t\t},\n\t\tparent: {\n\t\t\ttype: Boolean, \n\t\t\tdefault: false\n\t\t},\n\t\teditorRegExp: {\n\t\t\ttype: Object, \n\t\t\tdefault: () => ({\n\t\t\t\tclassName: /vm-hack-editor/\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * \n\t\t */\n\t\tprevent: {\n\t\t\ttype: Boolean, \n\t\t\tdefault: true\n\t\t},\n\t\tpreventRegExp: {\n\t\t\ttype: Object, \n\t\t\tdefault: () => ({\n\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|OPTION)$/,\n\t\t\t\tclassName: /vm-hack-pevent/\n\t\t\t})\n\t\t},\n\t},\n\tdata() {\n\n\t\treturn {\n\t\t\tresizable: false,\n\t\t\tdraggable: false,\n\t\t\trotatable: false,\n\t\t\tchanging: false,\n\t\t\tactive: false\n\t\t};\n\t},\n\tcomputed: {\n\t\tcoord() {\n\t\t\treturn {\n\t\t\t\tleft: this.x + 'px',\n\t\t\t\ttop: this.y + 'px',\n\t\t\t\tzIndex: this.z\n\t\t\t};\n\t\t},\n\t\tstyle() {\n\t\t\tconst w = this.w === 0 ? 'auto' : `${this.w}px`;\n\t\t\tconst h = this.h === 0 ? 'auto' : `${this.h}px`;\n\t\t\treturn {\n\t\t\t\twidth: w,\n\t\t\t\theight: h,\n\t\t\t\ttransform: `rotate(${this.r}deg)`\n\t\t\t};\n\t\t},\n\t\twidth() {\n\t\t\tlet num = Math.floor(\n\t\t\t\tMath.sqrt(this.w * this.w + this.h * this.h) * 1.15\n\t\t\t);\n\t\t\treturn `${num}px`;\n\t\t}\n\t},\n\twatch: {},\n\tbeforeCreate() {\n\t\tthis.parentX = 0;\n\t\tthis.parentY = 0;\n\t\tthis.parentW = 9999;\n\t\tthis.parentH = 9999;\n\t\tthis.mouseX = 0;\n\t\tthis.mouseY = 0;\n\t\tthis.lastMouseX = 0;\n\t\tthis.lastMouseY = 0;\n\t\tthis.mouseOffX = 0;\n\t\tthis.mouseOffY = 0;\n\n\t\tthis.handle = null;\n\n\t\t// \n\t\tthis.eventOpts = !isPassiveSupported || { capture: true, passive: true };\n\n\t\t// \n\t\tthis.beforeStatus = null;\n\t},\n\tmounted() {\n\t\t// , todo: \n\t\tif (this.w && this.minw > this.w) {\n\t\t\tthis.sync({ w: this.minw });\n\t\t}\n\t\tif (this.h && this.minh > this.h) {\n\t\t\tthis.sync({ h: this.minh });\n\t\t}\n\t\tconst { x, y } = this.$el.parentNode.getBoundingClientRect();\n\t\tthis.parentX = x;\n\t\tthis.parentY = y;\n\n\t\t// \n\t\tthis.parent && this.calculation();\n\t\tthis.$emit('resizing');\n\t},\n\tdestroyed() {\n\t\tthis.operateDOMEvents('remove');\n\t},\n\tmethods: {\n\t\tcalculation() {\n\t\t\tconst { width, height } = this.$el.parentNode.getBoundingClientRect();\n\t\t\tthis.parentW = width;\n\t\t\tthis.parentH = height; // this.$el.parentNode.clientHeight\n\t\t\tif (this.w > this.parentW) {\n\t\t\t\tthis.sync({ w: this.parentW });\n\t\t\t}\n\t\t\tif (this.h > this.parentH) {\n\t\t\t\tthis.sync({ h: this.parentH });\n\t\t\t}\n\t\t\tif ((this.x + this.w) > this.parentW) {\n\t\t\t\tthis.sync({ x: this.parentW - this.w });\n\t\t\t}\n\t\t\tif ((this.y + this.h) > this.parentH) {\n\t\t\t\tthis.sync({ y: this.parentH - this.h });\n\t\t\t}\n\t\t},\n\t\tsync(opts) {\t\t\t\n\t\t\tfor (let key in opts) {\n\t\t\t\tif (this[key] != opts[key]) {\n\t\t\t\t\t!this.beforeStatus && (this.beforeStatus = {\n\t\t\t\t\t\tx: this.x,\n\t\t\t\t\t\ty: this.y,\n\t\t\t\t\t\tz: this.z,\n\t\t\t\t\t\tw: this.w,\n\t\t\t\t\t\tr: this.r\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit(`update:${key}`, opts[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\toperateDOMEvents(type) {\n\t\t\tlet fn = type === 'add' ? doc.addEventListener : doc.removeEventListener;\n\n\t\t\tfn('mousedown', this.handleDeselect, this.eventOpts);\n\t\t\tfn('mousemove', this.handleMove, this.eventOpts);\n\t\t\tfn('mouseup', this.handleUp, this.eventOpts);\n\t\t},\n\t\t/**\n\t\t * active\n\t\t */\n\t\tsetActived() {\n\t\t\tthis.handleContainerDown();\n\t\t\tthis.handleUp();\n\t\t},\n\t\t/**\n\t\t * \n\t\t */\n\t\thandleContainerDown(e = {}) {\n\t\t\t//  todo: \n\t\t\tthis.prevent\n\t\t\t\t&& e.preventDefault \n\t\t\t\t&& !eleInRegExp(e.target, this.preventRegExp)\n\t\t\t\t&& e.preventDefault();\n\n\t\t\t// \n\t\t\tif (this.disabled) return;\n\t\t\tconst target = e.target || e.srcElement;\n\t\t\t// \n\t\t\tif (!target || this.$el.contains(target)) {\n\t\t\t\tif (!this.active) {\n\t\t\t\t\tthis.lastMouseX = e.pageX || e.clientX + doc.scrollLeft;\n\t\t\t\t\tthis.lastMouseY = e.pageY || e.clientY + doc.scrollTop;\n\n\t\t\t\t\t// \n\t\t\t\t\tthis.operateDOMEvents('add');\n\n\t\t\t\t\tthis.active = true;\n\t\t\t\t\tthis.$emit('activated');\n\t\t\t\t}\n\t\t\t\tthis.draggable = true;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * \n\t\t */\n\t\thandleDeselect(e) {\n\t\t\tthis.mouseX = e.pageX || e.clientX + doc.scrollLeft;\n\t\t\tthis.mouseY = e.pageY || e.clientY + doc.scrollTop;\n\t\t\tthis.lastMouseX = this.mouseX;\n\t\t\tthis.lastMouseY = this.mouseY;\n\t\t\tconst target = e.target || e.srcElement; // bodyclass, \n\n\t\t\t// \n\t\t\tconst regex = {\n\t\t\t\tclassName: /is-([(top|right|-|bottom|left)]{2})/\n\t\t\t};\n\n\t\t\tlet path = e.path || (e.composedPath && e.composedPath()) || [];\n\t\t\tif (\n\t\t\t\t!this.$el.contains(target) \n\t\t\t\t&& !eleInRegExp(target, regex)\n\t\t\t\t&& (!path.some(item => eleInRegExp(item, this.editorRegExp)))\n\t\t\t) {\n\t\t\t\tif (this.active) {\n\t\t\t\t\t// \n\t\t\t\t\tthis.operateDOMEvents('remove');\n\n\t\t\t\t\tthis.active = false;\n\t\t\t\t\tthis.$emit('deactivated');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * \n\t\t */\n\t\thandleDown(e, handle) {\n\t\t\t//  todo: \n\t\t\tthis.prevent\n\t\t\t\t&& e.preventDefault \n\t\t\t\t&& !eleInRegExp(e.target, this.preventRegExp)\n\t\t\t\t&& e.preventDefault();\n\n\t\t\t// handle\n\t\t\tthis.handle = handle;\n\t\t\tif (handle === 'rotate') {\n\t\t\t\tthis.rotatable = true;\n\t\t\t} else {\n\t\t\t\tthis.resizable = true;\n\t\t\t}\n\n\t\t\tthis.preMouseX = e.pageX || e.clientX + doc.scrollLeft;\n\t\t\tthis.preMouseY = e.pageY || e.clientY + doc.scrollTop;\n\t\t},\n\t\t/**\n\t\t * \n\t\t */\n\t\thandleMove(e) {\n\t\t\tthis.mouseX = e.pageX || e.clientX + doc.scrollLeft;\n\t\t\tthis.mouseY = e.pageY || e.clientY + doc.scrollTop;\n\n\t\t\t// x, y, w, h\n\t\t\tlet elmX = parseInt(this.x, 10);\n\t\t\tlet elmY = parseInt(this.y, 10);\n\t\t\tlet elmW = parseInt(this.w, 10);\n\t\t\tlet elmH = parseInt(this.h, 10);\n\n\t\t\t// diffX =   -  + \n\t\t\tlet diffX = (this.mouseX - this.lastMouseX + this.mouseOffX) / this.zoom;\n\t\t\tlet diffY = (this.mouseY - this.lastMouseY + this.mouseOffY) / this.zoom;\n\t\t\tthis.mouseOffX = 0;\n\t\t\tthis.mouseOffY = 0;\n\t\t\tthis.lastMouseX = this.mouseX;\n\t\t\tthis.lastMouseY = this.mouseY;\n\t\t\tif (this.resizable) {\n\t\t\t\tif (this.handle.includes('top')) {\n\t\t\t\t\tif (elmH - diffY < this.minh) { // \n\t\t\t\t\t\t// diffY -> 0 , this.mouseOffYthis.y -> \n\t\t\t\t\t\tthis.mouseOffY = (diffY - (diffY = elmH - this.minh));\n\t\t\t\t\t} else if (this.parent && elmY + diffY < 0) { //  \n\t\t\t\t\t\t// this.y  diffY -> 0, this.mouseOffYthis.y -> ()\n\t\t\t\t\t\tthis.mouseOffY = (diffY - (diffY = -elmY));\n\t\t\t\t\t}\n\t\t\t\t\telmY += diffY;\n\t\t\t\t\telmH -= diffY;\n\t\t\t\t}\n\t\t\t\tif (this.handle.includes('bottom')) {\n\t\t\t\t\tif (elmH + diffY < this.minh) { // \n\t\t\t\t\t\tthis.mouseOffY = (diffY - (diffY = this.minh - elmH));\n\t\t\t\t\t} else if (elmY + elmH + diffY > this.parentH) { // \n\t\t\t\t\t\tthis.mouseOffY = (diffY - (diffY = this.parentH - elmY - elmH));\n\t\t\t\t\t}\n\t\t\t\t\telmH += diffY;\n\t\t\t\t}\n\t\t\t\tif (this.handle.includes('left')) {\n\t\t\t\t\tif (elmW - diffX < this.minw) { // \n\t\t\t\t\t\tthis.mouseOffX = (diffX - (diffX = elmW - this.minw));\n\t\t\t\t\t} else if (this.parent && elmX + diffX < 0) { // \n\t\t\t\t\t\tthis.mouseOffX = (diffX - (diffX = -elmX));\n\t\t\t\t\t}\n\t\t\t\t\telmX += diffX;\n\t\t\t\t\telmW -= diffX;\n\t\t\t\t}\n\t\t\t\tif (this.handle.includes('right')) {\n\t\t\t\t\tif (elmW + diffX < this.minw) { // \n\t\t\t\t\t\tthis.mouseOffX = (diffX - (diffX = this.minw - elmW));\n\t\t\t\t\t} else if (elmX + elmW + diffX > this.parentW) { // \n\t\t\t\t\t\tthis.mouseOffX = (diffX - (diffX = this.parentW - elmX - elmW));\n\t\t\t\t\t}\n\t\t\t\t\telmW += diffX;\n\t\t\t\t}\n\t\t\t\t!this.disabled && this.sync({\n\t\t\t\t\tx: (Math.round(elmX / this.grid[0]) * this.grid[0]),\n\t\t\t\t\ty: (Math.round(elmY / this.grid[1]) * this.grid[1]),\n\t\t\t\t\tw: (Math.round(elmW / this.grid[0]) * this.grid[0]),\n\t\t\t\t\th: (Math.round(elmH / this.grid[1]) * this.grid[1]),\n\t\t\t\t});\n\t\t\t\tthis.$emit('resizing');\n\t\t\t} else if (this.rotatable) {\n\t\t\t\tlet angle = this.getAngle(\n\t\t\t\t\t[this.parentX + this.x + this.w / 2, -(this.parentY + this.y + this.h / 2)],\n\t\t\t\t\t[this.lastMouseX, -this.lastMouseY],\n\t\t\t\t);\n\n\t\t\t\tlet criticalAngle = angleArr.find(item => Math.abs(item - angle) < 3);\n\t\t\t\tangle = typeof criticalAngle === 'number' ? criticalAngle : angle;\n\n\t\t\t\t!this.disabled && this.sync({ \n\t\t\t\t\tr: angle === 360 ? 0 : angle\n\t\t\t\t});\n\t\t\t\tthis.$emit('rotating');\n\t\t\t} else if (this.draggable) {\n\t\t\t\tif (this.parent) {\n\t\t\t\t\tif (elmX + diffX < 0) {\n\t\t\t\t\t\tthis.mouseOffX = (diffX * this.zoom - (diffX = -elmX));\n\t\t\t\t\t} else if (elmX + elmW + diffX > this.parentW) {\n\t\t\t\t\t\tthis.mouseOffX = (diffX * this.zoom - (diffX = this.parentW - elmX - elmW));\n\t\t\t\t\t}\n\t\t\t\t\tif (elmY + diffY < 0) {\n\t\t\t\t\t\tthis.mouseOffY = (diffY * this.zoom - (diffY = -elmY));\n\t\t\t\t\t} else if (elmY + elmH + diffY > this.parentH) {\n\t\t\t\t\t\tthis.mouseOffY = (diffY * this.zoom - (diffY = this.parentH - elmY - elmH));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\telmX += diffX;\n\t\t\t\telmY += diffY;\n\n\t\t\t\t!this.disabled && this.sync({\n\t\t\t\t\tx: (Math.round(elmX / this.grid[0]) * this.grid[0]),\n\t\t\t\t\ty: (Math.round(elmY / this.grid[1]) * this.grid[1]),\n\t\t\t\t});\n\t\t\t\tthis.$emit('dragging');\n\t\t\t}\n\n\t\t\t// \n\t\t\t!this.changing \n\t\t\t\t&& (this.rotatable || this.draggable || this.resizable)\n\t\t\t\t&& (this.changing = true);\n\t\t\t\t\n\t\t},\n\t\tgetAngle(center, last) {\n\t\t\tlet diffX = last[0] - center[0];\n\t\t\tlet diffY = last[1] - center[1];\n\t\t\t/**\n\t\t\t * https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math/atan2\n\t\t\t * -180 <= c < 180\n\t\t\t */\n\t\t\tlet c = 360 * Math.atan2(diffY, diffX) / (2 * Math.PI);\n\t\t\tc = c > 90 \n\t\t\t\t? (450 - c) // 4\n\t\t\t\t: 90 - c; // 123\n\t\t\treturn Math.floor(c);\n\t\t},\n\t\tgetRestrain(num) {\n\t\t\tconst restrain = this.restrain;\n\t\t\treturn (num / restrain).toFixed(0) * restrain;\n\t\t},\n\t\thandleUp(e) {\n\t\t\tthis.changing = false;\n\t\t\tthis.handle = null;\n\t\t\t// \n\t\t\tconst restrain = this.restrain;\n\t\t\tif (restrain && restrain > 0) {\n\t\t\t\tthis.sync({\n\t\t\t\t\tx: this.getRestrain(this.x),\n\t\t\t\t\ty: this.getRestrain(this.y),\n\t\t\t\t\tw: this.getRestrain(this.w),\n\t\t\t\t\th: this.getRestrain(this.h),\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.rotatable) {\n\t\t\t\tthis.rotatable = false;\n\t\t\t\tthis.$emit('rotate-end');\n\t\t\t}\n\t\t\tif (this.resizable) {\n\t\t\t\tthis.resizable = false;\n\t\t\t\tthis.$emit('resize-end');\n\t\t\t}\n\t\t\tif (this.draggable) {\n\t\t\t\tthis.draggable = false;\n\t\t\t\tthis.$emit('drag-end');\n\t\t\t}\n\t\t\tif (this.beforeStatus) {\n\t\t\t\tthis.$emit('end', this.beforeStatus);\n\t\t\t\tthis.beforeStatus = null;\n\t\t\t}\n\t\t}\n\t},\n};\n</script>\n\n<style lang=\"scss\">\n\n$url: 'data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" style=\"font-size: 20px;\"><text y=\"15\"></text></svg>';\n\n.vm-draggable {\n\tpadding: 0;\n\tposition: absolute;\n\tbox-sizing: border-box;\n\tuser-select: none;\n\t&:hover {\n\t\tcursor: move;\n\t}\n\t.is-events-none {\n\t\tpointer-events: none;\n\t}\n\t.is-active {\n\t\tpadding: 0;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tposition: absolute;\n\t\tz-index: 2;\n\t\tborder: 1px dotted #108ee9;\n\t\t// cursor: move;\n\t\t.vm-draggable__handle {\n\t\t\tdisplay: block;\n\t\t}\n\t}\n\t.is-disabled {\n\t\tborder: 1px dotted #e96101;\n\t\t.handle-rotate {\n\t\t\t&:after {\n\t\t\t\tbackground: #e96101;\n\t\t\t}\n\t\t\t&:before {\n\t\t\t\tcolor: #e96101;\n\t\t\t}\n\t\t}\n\t}\n\t.is-delete {\n\t\tbackground: #108ee9;\n\t\tposition: absolute;\n\t\tright: 0;\n\t\twidth: 20px;\n\t\tcolor: white;\n\t\ttext-align: center;\n\t\tz-index: 300\n\t}\n}\n\n.vm-draggable__handle {\n\tdisplay: none;\n\tposition: absolute;\n\tbox-sizing: border-box;\n\tz-index: 999;\n\t&.is-left {\n\t\ttop: 0;\n\t\tleft: -5px;\n\t\tcursor: ew-resize;\n\t\tposition: absolute;\n\t\theight: 100%;\n\t\twidth: 5px;\n\t\t&:hover {\n\t\t\tbackground: linear-gradient(to right, rgba(255, 255, 255, 0), #3F51B5);\n\t\t}\n\t}\n\t&.is-right {\n\t\ttop: 0;\n\t\tright: -5px;\n\t\tcursor: ew-resize;\n\t\tposition: absolute;\n\t\theight: 100%;\n\t\twidth: 5px;\n\t\t&:hover {\n\t\t\tbackground: linear-gradient(to left, rgba(255, 255, 255, 0), #3F51B5);\n\t\t}\n\t}\n\n\t&.is-top {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 5px;\n\t\ttop: -5px;\n\t\tleft: 0;\n\t\tcursor: ns-resize;\n\t\t&:hover {\n\t\t\tbackground: linear-gradient(to bottom, rgba(255, 255, 255, 0), #3F51B5);\n\t\t}\n\t}\n\t&.is-bottom {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 5px;\n\t\tbottom: -5px;\n\t\tleft: 0;\n\t\tcursor: ns-resize;\n\t\t&:hover {\n\t\t\tbackground: linear-gradient(to top, rgba(255, 255, 255, 0), #3F51B5);\n\t\t}\n\t}\n\t&.is-top-left {\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tcursor: nwse-resize;\n\t\tpadding: 5px;\n\t}\n\t.is-bottom-left {\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tcursor: nesw-resize;\n\t\tpadding: 5px;\n\t}\n\t&.is-top-right {\n\t\ttop: 0;\n\t\tright: 0;\n\t\tcursor: nesw-resize;\n\t\tpadding: 5px;\n\t}\n\t&.is-bottom-right {\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tcursor: nwse-resize;\n\t\tpadding: 5px;\n\t}\n\t&.is-rotate {\n\t\ttop: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -100%);\n\t\tcursor: url($url) 10 10,default;\n\t\tdisplay: flex !important;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\t&:after {\n\t\t\tcontent: ' ';\n\t\t\theight: 10px;\n\t\t\twidth: 1px;\n\t\t\tbackground: #108ee9;\n\t\t}\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\ttransform: translateY(26%);\n\t\t\tcolor: #108ee9;\n\t\t}\n\t}\n}\n\n/**\n * rotate\n */\n.vm-draggable__rotate {\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 50%;\n\tz-index: 2;\n\twidth: 500px;\n\tborder: 1px solid #1fb6ff;\n\tbackground-color: #1fb6ff;\n\ttransform: translate(-50%, -50%) rotate(90deg);\n\t.is-deg-0 {\n\t\ttransform: translate(-50%, -50%);\n\t}\n\t.is-deg-45 {\n\t\ttransform: translate(-50%, -50%) rotate(45deg);\n\t}\n\t.is-deg-90 {\n\t\ttransform: translate(-50%, -50%) rotate(90deg);\n\t}\n\t.is-deg-135 {\n\t\ttransform: translate(-50%, -50%) rotate(135deg);\n\t}\n\t.is-deg-tip {\n\t\tposition: absolute;\n\t\ttop: -50px;\n\t\tleft: 60%;\n\t\twidth: 40px;\n\t\theight: 16px;\n\t\tline-height: 16px;\n\t\ttext-align: center;\n\t\tborder: 1px solid #262626;\n\t\tborder-radius: 8px;\n\t\tbackground-color: #fff;\n\t}\n\tdiv[class^=is-deg-] {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tz-index: 2;\n\t\twidth: 500px;\n\t\tborder-top: 1px dashed #fff;\n\t\tborder-bottom: 1px dashed #262626;\n\t\topacity: .4;\n\t}\n}\n\n</style>\n"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__ = undefined;
  /* module identifier */
  var __vue_module_identifier__ = undefined;
  /* functional template */
  var __vue_is_functional_template__ = false;
  /* style inject SSR */
  

  
  var Draggable = normalizeComponent_1(
    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },
    __vue_inject_styles__,
    __vue_script__,
    __vue_scope_id__,
    __vue_is_functional_template__,
    __vue_module_identifier__,
    browser,
    undefined
  );

//
var doc$2 = document.documentElement;
var eleDrag = null;
var script$1 = {
  replace: true,
  name: 'vm-srot-list-item',
  props: {
    // order
    index: {
      type: Number | String,
      required: true
    },
    // getData/setData
    type: {
      type: String,
      default: '@wya/vm'
    },
    disabled: Draggable.props.disabled,
    editorRegExp: Draggable.props.editorRegExp,
    prevent: Draggable.props.prevent,
    preventRegExp: Draggable.props.preventRegExp
  },
  data: function data() {
    return {
      isActive: false
    };
  },
  computed: {},
  watch: {},
  beforeCreate: function beforeCreate() {
    // 
    this.eventOpts = !isPassiveSupported || {
      capture: true,
      passive: true
    };
  },
  mounted: function mounted() {},
  destroyed: function destroyed() {
    this.operateDOMEvents('remove');
  },
  methods: {
    operateDOMEvents: function operateDOMEvents(type) {
      var fn = type === 'add' ? doc$2.addEventListener : doc$2.removeEventListener;
      fn('mousedown', this.handleDeselect, this.eventOpts);
    },

    /**
     * active
     */
    setActived: function setActived() {
      this.handleClick();
    },

    /**
     * 
     */
    handleClick: function handleClick() {
      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      //  todo: 
      this.prevent && e.preventDefault && !eleInRegExp(e.target, this.preventRegExp) && e.preventDefault(); // 

      if (this.disabled) { return; }
      var target = e.target || e.srcElement; // 

      if (!target || this.$el.contains(target)) {
        if (!this.isActive) {
          // 
          this.operateDOMEvents('add');
          this.isActive = true;
          this.$emit('activated');
        }
      }
    },

    /**
     * 
     */
    handleDeselect: function handleDeselect(e) {
      var _this = this;

      var target = e.target || e.srcElement; // bodyclass, 

      var path = e.path || e.composedPath && e.composedPath() || [];

      if (!this.$el.contains(target) && !path.some(function (item) {
        return eleInRegExp(item, _this.editorRegExp);
      })) {
        if (this.isActive) {
          // 
          this.operateDOMEvents('remove');
          this.isActive = false;
          this.$emit('deactivated');
        }
      }
    },

    /**
    * 
    */
    handleDragStart: function handleDragStart(e) {
      //  - 
      e.dataTransfer.setData(this.type, this.index); // 

      e.dataTransfer.effectAllowed = "move";
      eleDrag = e.target;
      eleDrag.__START_INDEX__ = this.index;
      eleDrag.__END_INDEX__ = this.index;
      e.target.style.opacity = 0;
    },

    /**
    * 
    */
    handleDragEnter: function handleDragEnter(e) {
      var _this2 = this;

      if (eleDrag && e.target != eleDrag) {
        // 
        if (this.index != eleDrag.__END_INDEX__) {
          if (this.timer) { return; }
          this.timer = setTimeout(function () {
            _this2.timer = null;
          }, 500);
          this.$emit('sort', [eleDrag.__END_INDEX__, this.index]);
          eleDrag.__END_INDEX__ = this.index;
        }
      }
    },

    /**
    * 
    */
    handleDragEnd: function handleDragEnd(e) {
      e.dataTransfer.clearData(this.type);
      e.target.style.opacity = 1;

      if (eleDrag) {
        this.$emit('sort-end', [eleDrag.__START_INDEX__, eleDrag.__END_INDEX__]);
      }

      eleDrag = null;
    }
  }
};

/* script */
var __vue_script__$1 = script$1;

/* template */
var __vue_render__$1 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    {
      staticClass: "vm-sortable",
      attrs: { draggable: !_vm.disabled },
      on: {
        click: _vm.handleClick,
        dragstart: _vm.handleDragStart,
        dragenter: _vm.handleDragEnter,
        dragover: function($event) {
          $event.preventDefault();
        },
        dragend: _vm.handleDragEnd
      }
    },
    [
      _c(
        "div",
        { staticStyle: { "pointer-events": "none" } },
        [_vm._t("default")],
        2
      ),
      _vm._v(" "),
      _vm.isActive
        ? _c("div", {
            class: { "is-disabled": _vm.disabled, "is-active": _vm.isActive }
          })
        : _vm._e()
    ]
  )
};
var __vue_staticRenderFns__$1 = [];
__vue_render__$1._withStripped = true;

  /* style */
  var __vue_inject_styles__$1 = function (inject) {
    if (!inject) { return }
    inject("data-v-95b302c0_0", { source: ".vm-sortable {\n  padding: 0;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  position: relative;\n  -webkit-transition: opacity 0.5s;\n  transition: opacity 0.5s;\n}\n.vm-sortable:hover {\n  cursor: move;\n}\n.vm-sortable .is-active {\n  padding: 0;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  position: absolute;\n  z-index: 2;\n  border: 1px dotted #108ee9;\n  cursor: move;\n}\n.vm-sortable.is-disabled {\n  cursor: no-drop;\n}\n\n/*# sourceMappingURL=sortable.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/core/sortable/sortable.vue","sortable.vue"],"names":[],"mappings":"AAiLA;EACA,UAAA;EACA,8BAAA;UAAA,sBAAA;EACA,yBAAA;KAAA,sBAAA;MAAA,qBAAA;UAAA,iBAAA;EACA,kBAAA;EACA,gCAAA;EAAA,wBAAA;AChLA;ADiLA;EACA,YAAA;AC/KA;ADiLA;EACA,UAAA;EACA,MAAA;EACA,OAAA;EACA,QAAA;EACA,SAAA;EACA,kBAAA;EACA,UAAA;EACA,0BAAA;EACA,YAAA;AC/KA;ADiLA;EACA,eAAA;AC/KA;;AAEA,uCAAuC","file":"sortable.vue","sourcesContent":["<template>\n\t<div \n\t\t:draggable=\"!disabled\"\n\t\tclass=\"vm-sortable\" \n\t\t@click=\"handleClick\"\n\t\t@dragstart=\"handleDragStart\"\n\t\t@dragenter=\"handleDragEnter\"\n\t\t@dragover.prevent\n\t\t@dragend=\"handleDragEnd\"\n\t>\n\t\t<div style=\"pointer-events: none;\">\n\t\t\t<slot />\n\t\t</div>\n\t\t<!-- handle -->\n\t\t<div v-if=\"isActive\" :class=\"{ 'is-disabled': disabled, 'is-active': isActive }\" />\n\t</div>\n</template>\n\n<script>\nimport { isPassiveSupported, eleInRegExp } from '../../utils/helper';\nimport Draggable from '../draggable/index';\n\nconst doc = document.documentElement;\nlet eleDrag = null;\n\nexport default {\n\treplace: true,\n\tname: 'vm-srot-list-item',\n\tprops: {\n\t\t// order\n\t\tindex: {\n\t\t\ttype: Number | String,\n\t\t\trequired: true\n\t\t},\n\t\t// getData/setData\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: '@wya/vm'\n\t\t},\n\t\tdisabled: Draggable.props.disabled,\n\t\teditorRegExp: Draggable.props.editorRegExp,\n\t\tprevent: Draggable.props.prevent,\n\t\tpreventRegExp: Draggable.props.preventRegExp\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisActive: false\n\t\t};\n\t},\n\tcomputed: {\n\t\t\n\t},\n\twatch: {},\n\tbeforeCreate() {\n\t\t// \n\t\tthis.eventOpts = !isPassiveSupported || { capture: true, passive: true };\n\t},\n\tmounted() {\n\t\t\n\t},\n\tdestroyed() {\n\t\tthis.operateDOMEvents('remove');\n\t},\n\tmethods: {\n\t\toperateDOMEvents(type) {\n\t\t\tlet fn = type === 'add' ? doc.addEventListener : doc.removeEventListener;\n\n\t\t\tfn('mousedown', this.handleDeselect, this.eventOpts);\n\t\t},\n\t\t/**\n\t\t * active\n\t\t */\n\t\tsetActived() {\n\t\t\tthis.handleClick();\n\t\t},\n\t\t/**\n\t\t * \n\t\t */\n\t\thandleClick(e = {}) {\n\t\t\t//  todo: \n\t\t\tthis.prevent\n\t\t\t\t&& e.preventDefault \n\t\t\t\t&& !eleInRegExp(e.target, this.preventRegExp)\n\t\t\t\t&& e.preventDefault();\n\n\t\t\t// \n\t\t\tif (this.disabled) return;\n\t\t\tconst target = e.target || e.srcElement;\n\t\t\t// \n\t\t\tif (!target || this.$el.contains(target)) {\n\t\t\t\tif (!this.isActive) {\n\t\t\t\t\t// \n\t\t\t\t\tthis.operateDOMEvents('add');\n\n\t\t\t\t\tthis.isActive = true;\n\t\t\t\t\tthis.$emit('activated');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * \n\t\t */\n\t\thandleDeselect(e) {\n\t\t\tconst target = e.target || e.srcElement; // bodyclass, \n\n\t\t\tlet path = e.path || (e.composedPath && e.composedPath()) || [];\n\t\t\tif (\n\t\t\t\t!this.$el.contains(target) \n\t\t\t\t&& (!path.some(item => eleInRegExp(item, this.editorRegExp)))\n\t\t\t) {\n\t\t\t\tif (this.isActive) {\n\t\t\t\t\t// \n\t\t\t\t\tthis.operateDOMEvents('remove');\n\n\t\t\t\t\tthis.isActive = false;\n\t\t\t\t\tthis.$emit('deactivated');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* \n\t\t*/\n\t\thandleDragStart(e) {\n\t\t\t//  - \n\t\t\te.dataTransfer.setData(this.type, this.index);\n\n\t\t\t// \n\t\t\te.dataTransfer.effectAllowed = \"move\";\n\n\t\t\teleDrag = e.target;\n\n\t\t\teleDrag.__START_INDEX__ = this.index;\n\t\t\teleDrag.__END_INDEX__ = this.index;\n\n\t\t\te.target.style.opacity = 0;\n\t\t},\n\n\t\t/**\n\t\t* \n\t\t*/\n\t\thandleDragEnter(e) {\n\t\t\tif (eleDrag && e.target != eleDrag) { // \n\t\t\t\tif (this.index != eleDrag.__END_INDEX__) {\n\t\t\t\t\tif (this.timer) return;\n\t\t\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t\t\tthis.timer = null;\n\t\t\t\t\t}, 500);\n\n\t\t\t\t\tthis.$emit('sort', [eleDrag.__END_INDEX__, this.index]);\n\t\t\t\t\teleDrag.__END_INDEX__ = this.index;\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t} else if (!eleDrag) { // \n\t\t\t\t// ...\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t* \n\t\t*/\n\t\thandleDragEnd(e) {\n\t\t\te.dataTransfer.clearData(this.type);\n\n\t\t\te.target.style.opacity = 1;\n\n\t\t\tif (eleDrag) {\n\t\t\t\tthis.$emit('sort-end', [eleDrag.__START_INDEX__, eleDrag.__END_INDEX__]);\n\t\t\t}\n\n\t\t\teleDrag = null;\n\t\t},\n\t},\n};\n</script>\n\n<style lang=\"scss\">\n.vm-sortable {\n\tpadding: 0;\n\tbox-sizing: border-box;\n\tuser-select: none;\n\tposition: relative;\n\ttransition: opacity .5s; //  \n\t&:hover {\n\t\tcursor: move;\n\t}\n\t.is-active {\n\t\tpadding: 0;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tposition: absolute;\n\t\tz-index: 2;\n\t\tborder: 1px dotted #108ee9;\n\t\tcursor: move;\n\t}\n\t&.is-disabled {\n\t\tcursor: no-drop;\n\t}\n}\n\n</style>\n",".vm-sortable {\n  padding: 0;\n  box-sizing: border-box;\n  user-select: none;\n  position: relative;\n  transition: opacity 0.5s;\n}\n.vm-sortable:hover {\n  cursor: move;\n}\n.vm-sortable .is-active {\n  padding: 0;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  position: absolute;\n  z-index: 2;\n  border: 1px dotted #108ee9;\n  cursor: move;\n}\n.vm-sortable.is-disabled {\n  cursor: no-drop;\n}\n\n/*# sourceMappingURL=sortable.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$1 = undefined;
  /* module identifier */
  var __vue_module_identifier__$1 = undefined;
  /* functional template */
  var __vue_is_functional_template__$1 = false;
  /* style inject SSR */
  

  
  var Sortable = normalizeComponent_1(
    { render: __vue_render__$1, staticRenderFns: __vue_staticRenderFns__$1 },
    __vue_inject_styles__$1,
    __vue_script__$1,
    __vue_scope_id__$1,
    __vue_is_functional_template__$1,
    __vue_module_identifier__$1,
    browser,
    undefined
  );

function _typeof(obj) {
  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function (obj) {
      return typeof obj;
    };
  } else {
    _typeof = function (obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

function _defineProperty$1(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};
    var ownKeys = Object.keys(source);

    if (typeof Object.getOwnPropertySymbols === 'function') {
      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {
        return Object.getOwnPropertyDescriptor(source, sym).enumerable;
      }));
    }

    ownKeys.forEach(function (key) {
      _defineProperty$1(target, key, source[key]);
    });
  }

  return target;
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};

  var target = _objectWithoutPropertiesLoose(source, excluded);

  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  }
}

function _iterableToArray(iter) {
  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance");
}

//
//
//
//
//
//
//
//
//
//
//
//
//
var script$2 = {
  name: 'vm-tpl-viewer',
  components: {},
  props: {
    id: String,
    x: Number,
    y: Number,
    z: Number,
    w: Number,
    h: Number,
    r: Number,
    name: [Number, String]
  },
  data: function data() {
    return {};
  },
  computed: {},
  created: function created() {},
  methods: {}
};

/* script */
var __vue_script__$2 = script$2;

/* template */
var __vue_render__$2 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    {
      style: [
        {
          height: "" + (_vm.h ? _vm.h + "px" : "auto"),
          width: "" + (_vm.w ? _vm.w + "px" : "auto"),
          color: "black"
        }
      ]
    },
    [
      _vm._v("\n\tid: " + _vm._s(_vm.id) + " "),
      _c("br"),
      _vm._v("\n\tX: " + _vm._s(_vm.x) + " "),
      _c("br"),
      _vm._v("\n\tY: " + _vm._s(_vm.y) + " "),
      _c("br"),
      _vm._v("\n\tZ: " + _vm._s(_vm.z) + " "),
      _c("br"),
      _vm._v("\n\tWidth: " + _vm._s(_vm.w ? _vm.w : "auto") + " "),
      _c("br"),
      _vm._v("\n\tHeight: " + _vm._s(_vm.h ? _vm.h : "auto") + " "),
      _c("br"),
      _vm._v("\n\tRotate: " + _vm._s(_vm.r) + " "),
      _c("br"),
      _vm._v("\n\tName: " + _vm._s(_vm.name) + " "),
      _c("br")
    ]
  )
};
var __vue_staticRenderFns__$2 = [];
__vue_render__$2._withStripped = true;

  /* style */
  var __vue_inject_styles__$2 = function (inject) {
    if (!inject) { return }
    inject("data-v-2b9bc37d_0", { source: "\n\n/*# sourceMappingURL=viewer.vue.map */", map: {"version":3,"sources":["viewer.vue"],"names":[],"mappings":";;AAEA,qCAAqC","file":"viewer.vue"}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$2 = "data-v-2b9bc37d";
  /* module identifier */
  var __vue_module_identifier__$2 = undefined;
  /* functional template */
  var __vue_is_functional_template__$2 = false;
  /* style inject SSR */
  

  
  var Viewer = normalizeComponent_1(
    { render: __vue_render__$2, staticRenderFns: __vue_staticRenderFns__$2 },
    __vue_inject_styles__$2,
    __vue_script__$2,
    __vue_scope_id__$2,
    __vue_is_functional_template__$2,
    __vue_module_identifier__$2,
    browser,
    undefined
  );

//
//
//
//
//
//
//
//
//
//
//
//
var script$3 = {
  name: 'vm-tpl-editor',
  components: {},
  props: {
    w: Number,
    h: Number,
    r: Number,
    x: Number,
    y: Number,
    z: Number,
    name: [Number, String]
  },
  data: function data() {
    return {};
  },
  computed: {},
  created: function created() {},
  methods: {
    handleChange: function handleChange(e, key) {
      this.$emit('change', _defineProperty$1({}, key, e.target.value));
    },
    handleClick: function handleClick() {
      // this.$emit('update:x', this.x + 1);
      this.$emit('change', {
        x: this.x + 1
      });
    }
  }
};

/* script */
var __vue_script__$3 = script$3;

/* template */
var __vue_render__$3 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    { staticStyle: { display: "flex", "flex-direction": "column" } },
    [
      _c("div", [
        _vm._v("w: "),
        _c("input", {
          domProps: { value: _vm.w },
          on: {
            input: function($event) {
              return _vm.handleChange($event, "w")
            }
          }
        })
      ]),
      _vm._v(" "),
      _c("div", [
        _vm._v("h: "),
        _c("input", {
          domProps: { value: _vm.h },
          on: {
            input: function($event) {
              return _vm.handleChange($event, "h")
            }
          }
        })
      ]),
      _vm._v(" "),
      _c("div", [
        _vm._v("x: "),
        _c("input", {
          domProps: { value: _vm.x },
          on: {
            input: function($event) {
              return _vm.handleChange($event, "x")
            }
          }
        })
      ]),
      _vm._v(" "),
      _c("div", [
        _vm._v("y: "),
        _c("input", {
          domProps: { value: _vm.y },
          on: {
            input: function($event) {
              return _vm.handleChange($event, "y")
            }
          }
        })
      ]),
      _vm._v(" "),
      _c("div", [
        _vm._v("z: "),
        _c("input", {
          domProps: { value: _vm.z },
          on: {
            input: function($event) {
              return _vm.handleChange($event, "z")
            }
          }
        })
      ]),
      _vm._v(" "),
      _c("div", [
        _vm._v("r: "),
        _c("input", {
          domProps: { value: _vm.r },
          on: {
            input: function($event) {
              return _vm.handleChange($event, "r")
            }
          }
        })
      ]),
      _vm._v(" "),
      _c("div", [
        _vm._v("name: "),
        _c("input", {
          domProps: { value: _vm.name },
          on: {
            input: function($event) {
              return _vm.handleChange($event, "name")
            }
          }
        })
      ])
    ]
  )
};
var __vue_staticRenderFns__$3 = [];
__vue_render__$3._withStripped = true;

  /* style */
  var __vue_inject_styles__$3 = function (inject) {
    if (!inject) { return }
    inject("data-v-de3dcfea_0", { source: "input[data-v-de3dcfea] {\n  border: 1px solid #000;\n  margin: 10px;\n}\n\n/*# sourceMappingURL=editor.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/modules/__tpl__/editor.vue","editor.vue"],"names":[],"mappings":"AAgDA;EACA,sBAAA;EACA,YAAA;AC/CA;;AAEA,qCAAqC","file":"editor.vue","sourcesContent":["<template>\n\t<div style=\"display: flex; flex-direction: column;\">\n\t\t<div>w: <input :value=\"w\" @input=\"handleChange($event, 'w')\"></div>\n\t\t<div>h: <input :value=\"h\" @input=\"handleChange($event, 'h')\"></div>\n\t\t<div>x: <input :value=\"x\" @input=\"handleChange($event, 'x')\"></div>\n\t\t<div>y: <input :value=\"y\" @input=\"handleChange($event, 'y')\"></div>\n\t\t<div>z: <input :value=\"z\" @input=\"handleChange($event, 'z')\"></div>\n\t\t<div>r: <input :value=\"r\" @input=\"handleChange($event, 'r')\"></div>\n\t\t<div>name: <input :value=\"name\" @input=\"handleChange($event, 'name')\"></div>\n\t</div>\n</template>\n\n<script>\n\nexport default {\n\tname: 'vm-tpl-editor',\n\tcomponents: {\n\t},\n\tprops: {\n\t\tw: Number,\n\t\th: Number,\n\t\tr: Number,\n\t\tx: Number,\n\t\ty: Number,\n\t\tz: Number,\n\t\tname: [Number, String],\n\t},\n\tdata() {\n\t\treturn {\n\t\t};\n\t},\n\tcomputed: {\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\thandleChange(e, key) {\n\t\t\tthis.$emit('change', { [key]: e.target.value });\n\t\t},\n\t\thandleClick() {\n\t\t\t// this.$emit('update:x', this.x + 1);\n\t\t\tthis.$emit('change', { x: this.x + 1 });\n\t\t}\n\t},\n};\n</script>\n\n<style lang=\"scss\" scoped>\ninput {\n\tborder: 1px solid #000;\n\tmargin: 10px;\n}\n</style>\n","input {\n  border: 1px solid #000;\n  margin: 10px;\n}\n\n/*# sourceMappingURL=editor.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$3 = "data-v-de3dcfea";
  /* module identifier */
  var __vue_module_identifier__$3 = undefined;
  /* functional template */
  var __vue_is_functional_template__$3 = false;
  /* style inject SSR */
  

  
  var Editor = normalizeComponent_1(
    { render: __vue_render__$3, staticRenderFns: __vue_staticRenderFns__$3 },
    __vue_inject_styles__$3,
    __vue_script__$3,
    __vue_scope_id__$3,
    __vue_is_functional_template__$3,
    __vue_module_identifier__$3,
    browser,
    undefined
  );

var tpl = {
  module: "tpl",
  type: '',
  name: "",
  Viewer: Viewer,
  Editor: Editor,
  // 
  data: {
    // for draggable
    w: 200,
    h: 150,
    r: 0,
    x: 0,
    // 
    y: 0,
    // 
    z: 1,
    parent: false,
    // for content
    name: ''
  },
  dataValidity: function dataValidity() {
    var res = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    if (!res.name) {
      return {
        error: ""
      };
    }

    return null;
  }
};

/**
 * roots
 */
var defaultModules = {
  tpl: tpl
};

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
var script$4 = {
  name: 'vm-grid-lines',
  components: {},
  props: {
    width: Number,
    height: Number,
    grid: {
      type: Array,
      default: function _default() {
        return [10, 10];
      }
    }
  },
  data: function data() {
    return {};
  },
  computed: {
    xArr: function xArr() {
      var _this = this;

      var length = Math.floor(this.width / this.grid[0]);
      return Array.from({
        length: length
      }, function (v, i) {
        return i * _this.grid[0];
      });
    },
    yArr: function yArr() {
      var _this2 = this;

      var length = Math.floor(this.height / this.grid[1]);
      return Array.from({
        length: length
      }, function (v, i) {
        return i * _this2.grid[1];
      });
    }
  },
  watch: {},
  created: function created() {},
  methods: {}
};

/* script */
var __vue_script__$4 = script$4;

/* template */
var __vue_render__$4 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    { staticClass: "vm-grid-lines" },
    [
      _vm._l(_vm.yArr, function(item) {
        return _c("div", {
          key: "y_" + item,
          staticClass: "vm-grid-lines__y",
          style: { top: item + "px" }
        })
      }),
      _vm._v(" "),
      _vm._l(_vm.xArr, function(item) {
        return _c("div", {
          key: "x_" + item,
          staticClass: "vm-grid-lines__x",
          style: { left: item + "px" }
        })
      })
    ],
    2
  )
};
var __vue_staticRenderFns__$4 = [];
__vue_render__$4._withStripped = true;

  /* style */
  var __vue_inject_styles__$4 = function (inject) {
    if (!inject) { return }
    inject("data-v-3f506ed4_0", { source: ".vm-grid-lines[data-v-3f506ed4] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 0;\n}\n.vm-grid-lines__x[data-v-3f506ed4] {\n  position: absolute;\n  left: 0;\n  width: 1px;\n  height: 100%;\n  border-left-width: 1px;\n  border-left-style: dotted;\n  border-left-color: #d6d6d6;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.vm-grid-lines__y[data-v-3f506ed4] {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 1px;\n  border-top-width: 1px;\n  border-top-style: dotted;\n  border-top-color: #d6d6d6;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\n/*# sourceMappingURL=grid-lines.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/frame/draggable/grid-lines.vue","grid-lines.vue"],"names":[],"mappings":"AA4DA;EACA,kBAAA;EACA,MAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,gBAAA;EACA,UAAA;AC3DA;AD6DA;EACA,kBAAA;EACA,OAAA;EACA,UAAA;EACA,YAAA;EACA,sBAAA;EACA,yBAAA;EACA,0BAAA;EACA,8BAAA;UAAA,sBAAA;AC1DA;AD4DA;EACA,kBAAA;EACA,MAAA;EACA,WAAA;EACA,WAAA;EACA,qBAAA;EACA,wBAAA;EACA,yBAAA;EACA,8BAAA;UAAA,sBAAA;ACzDA;;AAEA,yCAAyC","file":"grid-lines.vue","sourcesContent":["<template>\n\t<div class=\"vm-grid-lines\">\n\t\t<div \n\t\t\tv-for=\"item in yArr\" \n\t\t\t:key=\"`y_${item}`\" \n\t\t\t:style=\"{top: `${item}px`}\"  \n\t\t\tclass=\"vm-grid-lines__y\"\n\t\t/>\n\t\t<div \n\t\t\tv-for=\"item in xArr\" \n\t\t\t:key=\"`x_${item}`\" \n\t\t\t:style=\"{left: `${item}px`}\"  \n\t\t\tclass=\"vm-grid-lines__x\"\n\t\t/>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'vm-grid-lines',\n\tcomponents: {\n\n\t},\n\tprops: {\n\t\twidth: Number,\n\t\theight: Number,\n\t\tgrid: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => {\n\t\t\t\treturn [10, 10];\n\t\t\t}\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t};\n\t},\n\tcomputed: {\n\t\txArr() {\n\t\t\tlet length = Math.floor(this.width / this.grid[0]);\n\t\t\treturn Array.from({ length }, (v, i) => i * this.grid[0]);\n\t\t},\n\t\tyArr() {\n\t\t\tlet length = Math.floor(this.height / this.grid[1]);\n\t\t\treturn Array.from({ length }, (v, i) => i * this.grid[1]);\n\t\t}\n\t},\n\twatch: {\n\t\t\n\t},\n\tcreated() {\n\t\t\n\t},\n\tmethods: {\n\n\t},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.vm-grid-lines {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\tz-index: 0;\n}\n.vm-grid-lines__x {\n\tposition: absolute;\n\tleft: 0;\n\twidth: 1px;\n\theight: 100%;\n\tborder-left-width: 1px;\n\tborder-left-style: dotted;\n\tborder-left-color: rgb(214, 214, 214);\n\tbox-sizing: border-box;\n}\n.vm-grid-lines__y {\n\tposition: absolute;\n\ttop: 0;\n\twidth: 100%;\n\theight: 1px;\n\tborder-top-width: 1px;\n\tborder-top-style: dotted;\n\tborder-top-color: rgb(214, 214, 214); \n\tbox-sizing: border-box;\n}\n</style>\n",".vm-grid-lines {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 0;\n}\n\n.vm-grid-lines__x {\n  position: absolute;\n  left: 0;\n  width: 1px;\n  height: 100%;\n  border-left-width: 1px;\n  border-left-style: dotted;\n  border-left-color: #d6d6d6;\n  box-sizing: border-box;\n}\n\n.vm-grid-lines__y {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 1px;\n  border-top-width: 1px;\n  border-top-style: dotted;\n  border-top-color: #d6d6d6;\n  box-sizing: border-box;\n}\n\n/*# sourceMappingURL=grid-lines.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$4 = "data-v-3f506ed4";
  /* module identifier */
  var __vue_module_identifier__$4 = undefined;
  /* functional template */
  var __vue_is_functional_template__$4 = false;
  /* style inject SSR */
  

  
  var GridLines = normalizeComponent_1(
    { render: __vue_render__$4, staticRenderFns: __vue_staticRenderFns__$4 },
    __vue_inject_styles__$4,
    __vue_script__$4,
    __vue_scope_id__$4,
    __vue_is_functional_template__$4,
    __vue_module_identifier__$4,
    browser,
    undefined
  );

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
var script$5 = {
  name: 'vm-align-lines',
  components: {},
  props: {
    dataSource: {
      type: Array,
      default: function _default() {
        return [];
      }
    },
    editor: Object
  },
  data: function data() {
    return {};
  },
  computed: {
    alignData: function alignData() {
      var _this = this;

      if (this.dataSource.length <= 1 || !this.editor) {
        return {
          xArr: [],
          yArr: []
        };
      }

      var _ref = this.editor || {},
          x = _ref.x,
          y = _ref.y,
          w = _ref.w,
          h = _ref.h;

      var xArr = [x, x + w / 2, x + w];
      var yArr = [y, y + h / 2, y + h];
      var xyObj = this.dataSource.reduce(function (result) {
        var itemData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        var x = itemData.x,
            y = itemData.y,
            w = itemData.w,
            h = itemData.h,
            id = itemData.id;

        if (id !== _this.editor.id) {
          var _xArr = [x, x + w / 2, x + w];
          var _yArr = [y, y + h / 2, y + h];
          result.xArr = [].concat(_toConsumableArray(result.xArr), _xArr);
          result.yArr = [].concat(_toConsumableArray(result.yArr), _yArr);
        }

        return result;
      }, {
        xArr: [],
        yArr: []
      });
      return {
        xArr: xArr.filter(function (item) {
          return xyObj.xArr.includes(item);
        }),
        yArr: yArr.filter(function (item) {
          return xyObj.yArr.includes(item);
        })
      };
    }
  },
  watch: {},
  created: function created() {},
  methods: {}
};

/* script */
var __vue_script__$5 = script$5;

/* template */
var __vue_render__$5 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    { staticClass: "vm-align-lines" },
    [
      _vm._l(_vm.alignData.yArr, function(item) {
        return _c("div", {
          key: "y_" + item,
          staticClass: "vm-align-lines__y",
          style: { top: item + "px" }
        })
      }),
      _vm._v(" "),
      _vm._l(_vm.alignData.xArr, function(item) {
        return _c("div", {
          key: "x_" + item,
          staticClass: "vm-align-lines__x",
          style: { left: item + "px" }
        })
      })
    ],
    2
  )
};
var __vue_staticRenderFns__$5 = [];
__vue_render__$5._withStripped = true;

  /* style */
  var __vue_inject_styles__$5 = function (inject) {
    if (!inject) { return }
    inject("data-v-1c8b90fd_0", { source: ".vm-align-lines {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 0;\n}\n.vm-align-lines__x {\n  position: absolute;\n  left: 0;\n  width: 1px;\n  height: 100%;\n  border-left-width: 1px;\n  border-left-style: dotted;\n  border-left-color: #1fb6ff;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.vm-align-lines__y {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 1px;\n  border-top-width: 1px;\n  border-top-style: dotted;\n  border-top-color: #1fb6ff;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\n/*# sourceMappingURL=align-lines.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/frame/draggable/align-lines.vue","align-lines.vue"],"names":[],"mappings":"AA+EA;EACA,kBAAA;EACA,MAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,gBAAA;EACA,UAAA;AC9EA;ADgFA;EACA,kBAAA;EACA,OAAA;EACA,UAAA;EACA,YAAA;EACA,sBAAA;EACA,yBAAA;EACA,0BAAA;EACA,8BAAA;UAAA,sBAAA;AC7EA;AD+EA;EACA,kBAAA;EACA,MAAA;EACA,WAAA;EACA,WAAA;EACA,qBAAA;EACA,wBAAA;EACA,yBAAA;EACA,8BAAA;UAAA,sBAAA;AC5EA;;AAEA,0CAA0C","file":"align-lines.vue","sourcesContent":["<template>\n\t<div class=\"vm-align-lines\">\n\t\t<div \n\t\t\tv-for=\"item in alignData.yArr\" \n\t\t\t:key=\"`y_${item}`\" \n\t\t\t:style=\"{top: `${item}px`}\"  \n\t\t\tclass=\"vm-align-lines__y\"\n\t\t/>\n\t\t<div \n\t\t\tv-for=\"item in alignData.xArr\" \n\t\t\t:key=\"`x_${item}`\" \n\t\t\t:style=\"{left: `${item}px`}\"  \n\t\t\tclass=\"vm-align-lines__x\"\n\t\t/>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'vm-align-lines',\n\tcomponents: {\n\n\t},\n\tprops: {\n\t\tdataSource: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => ([])\n\t\t},\n\t\teditor: Object\n\t},\n\tdata() {\n\t\treturn {\n\t\t};\n\t},\n\tcomputed: {\n\t\talignData() {\n\t\t\tif (this.dataSource.length <= 1 || !this.editor) {\n\t\t\t\treturn {\n\t\t\t\t\txArr: [],\n\t\t\t\t\tyArr: []\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { x, y, w, h } = this.editor || {};\n\t\t\tlet xArr = [x, x + w / 2, x + w];\n\t\t\tlet yArr = [y, y + h / 2, y + h];\n\n\t\t\tlet xyObj = this.dataSource.reduce((result, itemData = {}) => {\n\n\t\t\t\tconst { x, y, w, h, id } = itemData;\n\t\t\t\tif (id !== this.editor.id) {\n\t\t\t\t\tlet xArr = [x, x + w / 2, x + w];\n\t\t\t\t\tlet yArr = [y, y + h / 2, y + h];\n\t\t\t\t\tresult.xArr = [...result.xArr, ...xArr];\n\t\t\t\t\tresult.yArr = [...result.yArr, ...yArr];\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}, {\n\t\t\t\txArr: [],\n\t\t\t\tyArr: []\n\t\t\t});\n\t\t\treturn {\n\t\t\t\txArr: xArr.filter(item => xyObj.xArr.includes(item)),\n\t\t\t\tyArr: yArr.filter(item => xyObj.yArr.includes(item))\n\t\t\t};\n\t\t}\n\t},\n\twatch: {\n\t\t\n\t},\n\tcreated() {\n\t\t\n\t},\n\tmethods: {\n\n\t},\n};\n</script>\n\n<style lang=\"scss\">\n.vm-align-lines {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\tz-index: 0;\n}\n.vm-align-lines__x {\n\tposition: absolute;\n\tleft: 0;\n\twidth: 1px;\n\theight: 100%;\n\tborder-left-width: 1px;\n\tborder-left-style: dotted;\n\tborder-left-color: #1fb6ff;\n\tbox-sizing: border-box;\n}\n.vm-align-lines__y {\n\tposition: absolute;\n\ttop: 0;\n\twidth: 100%;\n\theight: 1px;\n\tborder-top-width: 1px;\n\tborder-top-style: dotted;\n\tborder-top-color: #1fb6ff; \n\tbox-sizing: border-box;\n}\n</style>\n",".vm-align-lines {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 0;\n}\n\n.vm-align-lines__x {\n  position: absolute;\n  left: 0;\n  width: 1px;\n  height: 100%;\n  border-left-width: 1px;\n  border-left-style: dotted;\n  border-left-color: #1fb6ff;\n  box-sizing: border-box;\n}\n\n.vm-align-lines__y {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 1px;\n  border-top-width: 1px;\n  border-top-style: dotted;\n  border-top-color: #1fb6ff;\n  box-sizing: border-box;\n}\n\n/*# sourceMappingURL=align-lines.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$5 = undefined;
  /* module identifier */
  var __vue_module_identifier__$5 = undefined;
  /* functional template */
  var __vue_is_functional_template__$5 = false;
  /* style inject SSR */
  

  
  var AlignLines = normalizeComponent_1(
    { render: __vue_render__$5, staticRenderFns: __vue_staticRenderFns__$5 },
    __vue_inject_styles__$5,
    __vue_script__$5,
    __vue_scope_id__$5,
    __vue_is_functional_template__$5,
    __vue_module_identifier__$5,
    browser,
    undefined
  );

// 

/**
 *  start-> setData  enter -> getData
 */
var WIDGET_TO_FRAME = "@wya/vm";
/**
 * Frame start-> setData  enter -> getData
 */

var SORT_IN_FRAME = "@wya/vm";

var script$6 = {
  name: 'vm-frame',
  components: {
    'vm-draggable': Draggable,
    'vm-grid-lines': GridLines,
    'vm-align-lines': AlignLines
  },
  props: {
    width: Number,
    height: Number,
    dataSource: Array,
    editor: Object
  },
  data: function data() {
    return {};
  },
  computed: {
    style: function style() {
      var w = this.width === 0 ? 'auto' : "".concat(this.width, "px");
      var h = this.height === 0 ? 'auto' : "".concat(this.height, "px");
      return {
        width: w,
        height: h
      };
    }
  },
  created: function created() {},
  methods: {
    handleDragOver: function handleDragOver(e) {},
    handleDragEnd: function handleDragEnd(e) {
      console.log(e);
    },
    handleDrop: function handleDrop(e) {
      var mod = e.dataTransfer.getData(WIDGET_TO_FRAME);
      var result = this.$parent.$options.modules[mod]; // 

      if (!result) { return; }

      var _this$$el$getBounding = this.$el.getBoundingClientRect(),
          x = _this$$el$getBounding.x,
          y = _this$$el$getBounding.y;

      var mouseX = e.pageX || e.clientX + doc.scrollLeft;
      var mouseY = e.pageY || e.clientY + doc.scrollTop;
      var id = getUid();
      var index = this.dataSource.length; //  this.$emit("update:sync")

      this.dataSource.push(_objectSpread({}, cloneDeep_1(result.data), {
        module: mod,
        id: id,
        x: mouseX - x,
        y: mouseY - y
      }));
      this.$emit('change', {
        type: 'create',
        index: index,
        id: id
      }); // 

      this.setActived(index);
    },
    handleEnd: function handleEnd(old, id, index) {
      this.$emit('change', {
        type: 'update',
        id: id,
        index: index,
        old: old
      });
    },
    setActived: function setActived(index) {
      var _this = this;

      this.$nextTick(function () {
        try {
          _this.$refs.draggable[index].setActived();
        } catch (e) {
          console.error(e);
        }
      });
    }
  }
};

/* script */
var __vue_script__$6 = script$6;

/* template */
var __vue_render__$6 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    {
      staticStyle: { position: "relative" },
      style: _vm.style,
      on: {
        dragover: function($event) {
          $event.preventDefault();
          return _vm.handleDragOver($event)
        },
        dragend: _vm.handleDragEnd,
        drop: _vm.handleDrop
      }
    },
    [
      _c("vm-grid-lines", {
        attrs: { width: _vm.width, height: _vm.height, grid: [10, 10] }
      }),
      _vm._v(" "),
      _c("vm-align-lines", {
        attrs: { "data-source": _vm.dataSource, editor: _vm.editor }
      }),
      _vm._v(" "),
      _vm._l(_vm.dataSource, function(it, index) {
        return _c(
          "vm-draggable",
          {
            key: it.id,
            ref: "draggable",
            refInFor: true,
            attrs: {
              x: it.x,
              y: it.y,
              z: it.z,
              w: it.w,
              h: it.h,
              r: it.r,
              parent: it.parent,
              disabled: it.disabled,
              handles: it.handles,
              minw: it.minw,
              minh: it.minh,
              zoom: it.zoom,
              grid: it.grid,
              restrain: it.restrain
            },
            on: {
              "update:x": function($event) {
                return _vm.$set(it, "x", $event)
              },
              "update:y": function($event) {
                return _vm.$set(it, "y", $event)
              },
              "update:z": function($event) {
                return _vm.$set(it, "z", $event)
              },
              "update:w": function($event) {
                return _vm.$set(it, "w", $event)
              },
              "update:h": function($event) {
                return _vm.$set(it, "h", $event)
              },
              "update:r": function($event) {
                return _vm.$set(it, "r", $event)
              },
              activated: function($event) {
                return _vm.$emit("activated", it)
              },
              deactivated: function($event) {
                return _vm.$emit("deactivated", it)
              },
              dragging: function($event) {
                return _vm.$emit("dragging", it)
              },
              resizing: function($event) {
                return _vm.$emit("resizing", it)
              },
              rotating: function($event) {
                return _vm.$emit("rotating", it)
              },
              "resize-end": function($event) {
                return _vm.$emit("resize-end", it)
              },
              "drag-end": function($event) {
                return _vm.$emit("drag-end", it)
              },
              end: function($event) {
                return _vm.handleEnd(arguments[0], it.id, index)
              }
            }
          },
          [
            _c(
              "vm-" + it.module + "-viewer",
              _vm._b({ tag: "component" }, "component", it, false)
            )
          ],
          1
        )
      })
    ],
    2
  )
};
var __vue_staticRenderFns__$6 = [];
__vue_render__$6._withStripped = true;

  /* style */
  var __vue_inject_styles__$6 = undefined;
  /* scoped */
  var __vue_scope_id__$6 = undefined;
  /* module identifier */
  var __vue_module_identifier__$6 = undefined;
  /* functional template */
  var __vue_is_functional_template__$6 = false;
  /* style inject */
  
  /* style inject SSR */
  

  
  var DraggableFrame = normalizeComponent_1(
    { render: __vue_render__$6, staticRenderFns: __vue_staticRenderFns__$6 },
    __vue_inject_styles__$6,
    __vue_script__$6,
    __vue_scope_id__$6,
    __vue_is_functional_template__$6,
    __vue_module_identifier__$6,
    undefined,
    undefined
  );

var script$7 = {
  name: 'vm-frame',
  components: {
    'vm-sortable': Sortable
  },
  props: {
    width: Number,
    height: Number,
    dataSource: Array,
    editor: Object
  },
  data: function data() {
    return {
      dragType: SORT_IN_FRAME
    };
  },
  computed: {
    style: function style() {
      var w = this.width === 0 ? 'auto' : "".concat(this.width, "px");
      var h = this.height === 0 ? 'auto' : "".concat(this.height, "px");
      return {
        width: w,
        height: h
      };
    }
  },
  created: function created() {
    this.eleDrag = null;
  },
  methods: {
    handleDragOver: function handleDragOver(e) {},
    handleDragEnd: function handleDragEnd(e) {},
    handleDrop: function handleDrop(e) {
      var mod = e.dataTransfer.getData(WIDGET_TO_FRAME);
      var result = this.$parent.$options.modules[mod]; // 

      if (!result) { return; }
      /**
       * TODO: 
       */

      var id = getUid();
      var index = this.dataSource.length; // //  this.$emit("update:sync")

      this.dataSource.push(_objectSpread({}, cloneDeep_1(result.data), {
        module: mod,
        id: id
      }));
      this.$emit('change', {
        type: 'create',
        index: index,
        id: id
      }); // 

      this.setActived(index);
    },
    setActived: function setActived(index) {
      var _this = this;

      this.$nextTick(function () {
        try {
          _this.$refs.sort[index].setActived();
        } catch (e) {
          console.error(e);
        }
      });
    },

    /**
     * 
     */
    handleSort: function handleSort(v) {
      this.sortData(v);
    },
    handleSortEnd: function handleSortEnd(v) {
      if (v[1] != v[2]) {
        this.$emit('change', {
          type: 'sort',
          sort: v
        });
      }
    },

    /**
     * 
     */
    sortData: function sortData(v) {
      var current = this.dataSource[v[0]];
      var target = this.dataSource[v[1]];
      this.dataSource.splice(v[0], 1, target);
      this.dataSource.splice(v[1], 1, current);
    }
  }
};

/* script */
var __vue_script__$7 = script$7;

/* template */
var __vue_render__$7 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    {
      staticClass: "vm-sort-list",
      staticStyle: { position: "relative", overflow: "auto" },
      style: _vm.style,
      on: {
        dragover: function($event) {
          $event.preventDefault();
          return _vm.handleDragOver($event)
        },
        dragend: _vm.handleDragEnd,
        drop: _vm.handleDrop
      }
    },
    [
      _c(
        "transition-group",
        { attrs: { tag: "div", name: "flip-list" } },
        _vm._l(_vm.dataSource, function(it, index) {
          return _c(
            "div",
            { key: it.id, staticClass: "vm-sort-list__item" },
            [
              _c(
                "vm-sortable",
                {
                  ref: "sort",
                  refInFor: true,
                  attrs: { index: index, type: _vm.dragType },
                  on: {
                    activated: function($event) {
                      return _vm.$emit("activated", it, index)
                    },
                    deactivated: function($event) {
                      return _vm.$emit("deactivated", it, index)
                    },
                    sort: _vm.handleSort,
                    "sort-end": _vm.handleSortEnd
                  }
                },
                [
                  _c(
                    "vm-" + it.module + "-viewer",
                    _vm._b({ tag: "component" }, "component", it, false)
                  )
                ],
                1
              )
            ],
            1
          )
        }),
        0
      )
    ],
    1
  )
};
var __vue_staticRenderFns__$7 = [];
__vue_render__$7._withStripped = true;

  /* style */
  var __vue_inject_styles__$7 = function (inject) {
    if (!inject) { return }
    inject("data-v-2c9e4c2c_0", { source: ".vm-sort-list__item {\n  -webkit-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.flip-list-enter,\n.flip-list-leave-to {\n  opacity: 0;\n}\n.flip-list-leave-active {\n  display: none;\n}\n\n/*# sourceMappingURL=frame.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/frame/sortable/frame.vue","frame.vue"],"names":[],"mappings":"AAwIA;EACA,4BAAA;EAAA,oBAAA;ACvIA;AD0IA;;EAEA,UAAA;ACvIA;ADyIA;EACA,aAAA;ACtIA;;AAEA,oCAAoC","file":"frame.vue","sourcesContent":["<template>\n\t<div \n\t\t:style=\"style\" \n\t\tclass=\"vm-sort-list\"\n\t\tstyle=\"position: relative; overflow: auto\" \n\t\t@dragover.prevent=\"handleDragOver\" \n\t\t@dragend=\"handleDragEnd\"\n\t\t@drop=\"handleDrop\"\n\t>\n\t\t<transition-group tag=\"div\" name=\"flip-list\">\n\t\t\t<div v-for=\"(it, index) in dataSource\" :key=\"it.id\" class=\"vm-sort-list__item\">\n\t\t\t\t<!-- TODO:  -->\n\t\t\t\t<vm-sortable\n\t\t\t\t\t\n\t\t\t\t\tref=\"sort\"\n\t\t\t\t\t:index=\"index\"\n\t\t\t\t\t:type=\"dragType\"\n\t\t\t\t\t@activated=\"$emit('activated', it, index)\"\n\t\t\t\t\t@deactivated=\"$emit('deactivated', it, index)\"\n\t\t\t\t\t@sort=\"handleSort\"\n\t\t\t\t\t@sort-end=\"handleSortEnd\"\n\t\t\t\t>\n\t\t\t\t\t<component :is=\"`vm-${it.module}-viewer`\" v-bind=\"it\" />\n\t\t\t\t</vm-sortable>\n\t\t\t</div>\n\t\t</transition-group>\n\t</div>\n</template>\n\n<script>\nimport Sortable from '../../../core/sortable';\nimport { getUid, cloneDeep } from '../../../utils/helper';\nimport { SORT_IN_FRAME, WIDGET_TO_FRAME } from '../../constants';\n\nexport default {\n\tname: 'vm-frame',\n\tcomponents: {\n\t\t'vm-sortable': Sortable,\n\t},\n\tprops: {\n\t\twidth: Number,\n\t\theight: Number,\n\t\tdataSource: Array,\n\t\teditor: Object\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdragType: SORT_IN_FRAME\n\t\t};\n\t},\n\tcomputed: {\n\t\tstyle() {\n\t\t\tconst w = this.width === 0 ? 'auto' : `${this.width}px`;\n\t\t\tconst h = this.height === 0 ? 'auto' : `${this.height}px`;\n\t\t\treturn {\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t};\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.eleDrag = null;\n\t},\n\tmethods: {\n\t\thandleDragOver(e) {\n\t\t},\n\t\thandleDragEnd(e) {\n\t\t},\n\t\thandleDrop(e) {\n\t\t\tlet mod = e.dataTransfer.getData(WIDGET_TO_FRAME);\n\t\t\tlet result = this.$parent.$options.modules[mod];\n\t\t\t// \n\t\t\tif (!result) return;\n\t\t\t/**\n\t\t\t * TODO: \n\t\t\t */\n\t\t\tlet id = getUid();\n\t\t\tlet index = this.dataSource.length;\n\t\t\t// //  this.$emit(\"update:sync\")\n\t\t\tthis.dataSource.push({\n\t\t\t\t...cloneDeep(result.data),\n\t\t\t\tmodule: mod,\n\t\t\t\tid,\n\t\t\t});\n\n\t\t\tthis.$emit('change', { \n\t\t\t\ttype: 'create', \n\t\t\t\tindex,\n\t\t\t\tid\n\t\t\t});\n\n\t\t\t// \n\t\t\tthis.setActived(index);\n\t\t},\n\t\tsetActived(index) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\ttry {\n\t\t\t\t\tthis.$refs.sort[index].setActived();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * \n\t\t */\n\t\thandleSort(v) {\n\t\t\tthis.sortData(v);\n\t\t},\n\n\n\t\thandleSortEnd(v) {\n\t\t\tif (v[1] != v[2]) {\n\t\t\t\tthis.$emit('change', {\n\t\t\t\t\ttype: 'sort',\n\t\t\t\t\tsort: v\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * \n\t\t */\n\t\t\n\t\tsortData(v) {\n\t\t\tlet current = this.dataSource[v[0]];\n\t\t\tlet target = this.dataSource[v[1]];\n\t\t\tthis.dataSource.splice(v[0], 1, target);\n\t\t\tthis.dataSource.splice(v[1], 1, current);\n\t\t}\n\t},\n};\n</script>\n\n<style lang=\"scss\">\n.vm-sort-list__item {\n\ttransition: all .5s;\n}\n// /\n.flip-list-enter, \n.flip-list-leave-to{\n\topacity: 0;\n}\n.flip-list-leave-active {\n\tdisplay: none;\n}\n</style>\n",".vm-sort-list__item {\n  transition: all 0.5s;\n}\n\n.flip-list-enter,\n.flip-list-leave-to {\n  opacity: 0;\n}\n\n.flip-list-leave-active {\n  display: none;\n}\n\n/*# sourceMappingURL=frame.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$7 = undefined;
  /* module identifier */
  var __vue_module_identifier__$7 = undefined;
  /* functional template */
  var __vue_is_functional_template__$7 = false;
  /* style inject SSR */
  

  
  var SortableFrame = normalizeComponent_1(
    { render: __vue_render__$7, staticRenderFns: __vue_staticRenderFns__$7 },
    __vue_inject_styles__$7,
    __vue_script__$7,
    __vue_scope_id__$7,
    __vue_is_functional_template__$7,
    __vue_module_identifier__$7,
    browser,
    undefined
  );

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
var script$8 = {
  name: 'vm-tools-operation',
  components: {},
  props: {
    total: Number,
    current: Number,
    isEdit: Boolean
  },
  data: function data() {
    return {};
  },
  computed: {},
  watch: {},
  created: function created() {},
  methods: {
    handleUndo: function handleUndo() {
      this.$emit('undo');
    },
    handleRedo: function handleRedo() {
      this.$emit('redo');
    },
    handleDelete: function handleDelete() {
      this.$emit('delete');
    }
  }
};

/* script */
var __vue_script__$8 = script$8;

/* template */
var __vue_render__$8 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c("div", { staticClass: "vm-tools-operation vm-hack-editor" }, [
    _c(
      "div",
      { class: { disabled: _vm.current === 0 }, on: { click: _vm.handleUndo } },
      [_vm._v("")]
    ),
    _vm._v(" "),
    _c(
      "div",
      {
        class: { disabled: _vm.current === _vm.total },
        on: { click: _vm.handleRedo }
      },
      [_vm._v("")]
    ),
    _vm._v(" "),
    _c(
      "div",
      { class: { disabled: !_vm.isEdit }, on: { click: _vm.handleDelete } },
      [_vm._v("")]
    ),
    _vm._v(" "),
    _c("span", [
      _vm._v(
        "\n\t\tcur: " +
          _vm._s(_vm.current) +
          "\n\t\tlast: " +
          _vm._s(_vm.total) +
          "\n\t"
      )
    ])
  ])
};
var __vue_staticRenderFns__$8 = [];
__vue_render__$8._withStripped = true;

  /* style */
  var __vue_inject_styles__$8 = function (inject) {
    if (!inject) { return }
    inject("data-v-5c057320_0", { source: ".vm-tools-operation[data-v-5c057320] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  cursor: pointer;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.vm-tools-operation div[data-v-5c057320] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  width: 30px;\n  height: 30px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.vm-tools-operation .disabled[data-v-5c057320] {\n  pointer-events: none;\n  color: #ccc;\n}\n\n/*# sourceMappingURL=operation.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/tools/operation.vue","operation.vue"],"names":[],"mappings":"AA2DA;EACA,oBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,eAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,yBAAA;KAAA,sBAAA;MAAA,qBAAA;UAAA,iBAAA;AC1DA;AD2DA;EACA,oBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,uBAAA;EACA,WAAA;EACA,YAAA;EACA,yBAAA;KAAA,sBAAA;MAAA,qBAAA;UAAA,iBAAA;ACzDA;AD2DA;EACA,oBAAA;EACA,WAAA;ACzDA;;AAEA,wCAAwC","file":"operation.vue","sourcesContent":["<template>\n\t<div class=\"vm-tools-operation vm-hack-editor\">\n\t\t<div \n\t\t\t:class=\"{ disabled: current === 0 }\" \n\t\t\t@click=\"handleUndo\"\n\t\t></div>\n\t\t<div \n\t\t\t:class=\"{ disabled: current === total }\" \n\t\t\t@click=\"handleRedo\"\n\t\t></div>\n\t\t<div \n\t\t\t:class=\"{ disabled: !isEdit }\" \n\t\t\t@click=\"handleDelete\"\n\t\t></div>\n\t\t<span>\n\t\t\tcur: {{ current }}\n\t\t\tlast: {{ total }}\n\t\t</span>\n\t</div>\n</template>\n\n<script>\n\nexport default {\n\tname: 'vm-tools-operation',\n\tcomponents: {\n\t},\n\tprops: {\n\t\ttotal: Number,\n\t\tcurrent: Number,\n\t\tisEdit: Boolean\n\t},\n\tdata() {\n\t\treturn {\n\t\t};\n\t},\n\tcomputed: {\n\n\t},\n\twatch: {\n\t\t\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\thandleUndo() {\n\t\t\tthis.$emit('undo');\n\t\t},\n\t\thandleRedo() {\n\t\t\tthis.$emit('redo');\n\t\t},\n\t\thandleDelete() {\n\t\t\tthis.$emit('delete');\n\t\t}\n\t},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.vm-tools-operation {\n\tdisplay: flex;\n\tcursor: pointer;\n\talign-items: center;\n\tuser-select: none;\n\tdiv {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 30px;\n\t\theight: 30px;\n\t\tuser-select: none;\n\t}\n\t.disabled {\n\t\tpointer-events: none;\n\t\tcolor: #ccc;\n\t}\n}\n</style>\n",".vm-tools-operation {\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  user-select: none;\n}\n.vm-tools-operation div {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 30px;\n  height: 30px;\n  user-select: none;\n}\n.vm-tools-operation .disabled {\n  pointer-events: none;\n  color: #ccc;\n}\n\n/*# sourceMappingURL=operation.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$8 = "data-v-5c057320";
  /* module identifier */
  var __vue_module_identifier__$8 = undefined;
  /* functional template */
  var __vue_is_functional_template__$8 = false;
  /* style inject SSR */
  

  
  var ToolsOperation = normalizeComponent_1(
    { render: __vue_render__$8, staticRenderFns: __vue_staticRenderFns__$8 },
    __vue_inject_styles__$8,
    __vue_script__$8,
    __vue_scope_id__$8,
    __vue_is_functional_template__$8,
    __vue_module_identifier__$8,
    browser,
    undefined
  );

//
//
//
//
//
//
//
var script$9 = {
  name: 'vm-tools-save',
  components: {},
  props: {},
  data: function data() {
    return {};
  },
  computed: {},
  watch: {},
  created: function created() {},
  methods: {}
};

/* script */
var __vue_script__$9 = script$9;

/* template */
var __vue_render__$9 = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c("div", { staticClass: "vm-tools-save vm-hack-editor" }, [
    _c(
      "div",
      {
        on: {
          click: function($event) {
            return _vm.$emit("save")
          }
        }
      },
      [_vm._v("")]
    ),
    _vm._v(" "),
    _c(
      "div",
      {
        on: {
          click: function($event) {
            return _vm.$emit("preview")
          }
        }
      },
      [_vm._v("")]
    )
  ])
};
var __vue_staticRenderFns__$9 = [];
__vue_render__$9._withStripped = true;

  /* style */
  var __vue_inject_styles__$9 = function (inject) {
    if (!inject) { return }
    inject("data-v-c3554374_0", { source: ".vm-tools-save[data-v-c3554374] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  cursor: pointer;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.vm-tools-save div[data-v-c3554374] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  width: 30px;\n  height: 30px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.vm-tools-save .disabled[data-v-c3554374] {\n  pointer-events: none;\n  color: #ccc;\n}\n\n/*# sourceMappingURL=save.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/tools/save.vue","save.vue"],"names":[],"mappings":"AAgCA;EACA,oBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,eAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,yBAAA;KAAA,sBAAA;MAAA,qBAAA;UAAA,iBAAA;AC/BA;ADgCA;EACA,oBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,uBAAA;EACA,WAAA;EACA,YAAA;EACA,yBAAA;KAAA,sBAAA;MAAA,qBAAA;UAAA,iBAAA;AC9BA;ADgCA;EACA,oBAAA;EACA,WAAA;AC9BA;;AAEA,mCAAmC","file":"save.vue","sourcesContent":["<template>\n\t<div class=\"vm-tools-save vm-hack-editor\">\n\t\t<div @click=\"$emit('save')\"></div>\n\t\t<div @click=\"$emit('preview')\"></div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'vm-tools-save',\n\tcomponents: {\n\t},\n\tprops: {\n\t},\n\tdata() {\n\t\treturn {\n\t\t};\n\t},\n\tcomputed: {\n\n\t},\n\twatch: {\n\t\t\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.vm-tools-save {\n\tdisplay: flex;\n\tcursor: pointer;\n\talign-items: center;\n\tuser-select: none;\n\tdiv {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 30px;\n\t\theight: 30px;\n\t\tuser-select: none;\n\t}\n\t.disabled {\n\t\tpointer-events: none;\n\t\tcolor: #ccc;\n\t}\n}\n</style>\n",".vm-tools-save {\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  user-select: none;\n}\n.vm-tools-save div {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 30px;\n  height: 30px;\n  user-select: none;\n}\n.vm-tools-save .disabled {\n  pointer-events: none;\n  color: #ccc;\n}\n\n/*# sourceMappingURL=save.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$9 = "data-v-c3554374";
  /* module identifier */
  var __vue_module_identifier__$9 = undefined;
  /* functional template */
  var __vue_is_functional_template__$9 = false;
  /* style inject SSR */
  

  
  var ToolsSave = normalizeComponent_1(
    { render: __vue_render__$9, staticRenderFns: __vue_staticRenderFns__$9 },
    __vue_inject_styles__$9,
    __vue_script__$9,
    __vue_scope_id__$9,
    __vue_is_functional_template__$9,
    __vue_module_identifier__$9,
    browser,
    undefined
  );

var wrapper = {
  name: 'vm-preview',
  components: {},
  props: {
    dataSource: Array,
    css: {
      type: Object,
      default: function _default() {
        return {
          style: {},
          className: ""
        };
      }
    },
    animation: {
      type: String,
      default: 'fade'
    },
    mask: {
      type: Boolean,
      default: true
    },
    mode: {
      type: String,
      default: 'draggable'
    }
  },
  data: function data() {
    return {
      visible: false,
      transform: "translate(-100px, -100px)"
    };
  },
  computed: {
    isDraggable: function isDraggable() {
      return this.mode === 'draggable';
    }
  },
  watch: {},
  mounted: function mounted() {
    this.visible = true;
  },
  updated: function updated() {},
  methods: {
    handleClose: function handleClose() {
      var _this = this;

      this.visible = false;
      setTimeout(function () {
        _this.$emit('close');
      }, 300); // 
    }
  }
};
var Dom = document.body;
var Preview = {
  vm: null,
  show: function show() {
    var _this2 = this;

    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    var _opts$components = opts.components,
        components = _opts$components === void 0 ? {} : _opts$components,
        rest = _objectWithoutProperties(opts, ["components"]); // 


    components = clearCtor(components);
    var div = document.createElement('div');
    var VueComponent = Vue.extend(cloneDeep_1(_objectSpread({}, wrapper, {
      components: _objectSpread({}, wrapper.components, components)
    }))); // 

    this.vm && this.vm.$emit('close');
    this.vm = new VueComponent({
      el: div,
      propsData: _objectSpread({}, rest)
    });
    this.vm.$on('close', function () {
      _this2.vm.$destroy(); // 


      Dom.removeChild(_this2.vm.$el);
    });
    Dom.appendChild(this.vm.$el);
    return this.vm;
  },
  hide: function hide() {
    this.vm && this.vm.$emit('close');
  }
};

/* script */
var __vue_script__$a = wrapper;

/* template */
var __vue_render__$a = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    { staticClass: "vm-tools-preview" },
    [
      _vm.mask
        ? _c("transition", { attrs: { name: _vm.animation } }, [
            _c("div", {
              directives: [
                {
                  name: "show",
                  rawName: "v-show",
                  value: _vm.visible,
                  expression: "visible"
                }
              ],
              staticClass: "__mask",
              on: { click: _vm.handleClose }
            })
          ])
        : _vm._e(),
      _vm._v(" "),
      _vm.mask
        ? _c("transition", { attrs: { name: _vm.animation } }, [
            _c(
              "div",
              {
                directives: [
                  {
                    name: "show",
                    rawName: "v-show",
                    value: _vm.visible,
                    expression: "visible"
                  }
                ],
                staticClass: "__close",
                on: { click: _vm.handleClose }
              },
              [_vm._v("")]
            )
          ])
        : _vm._e(),
      _vm._v(" "),
      _c("transition", { attrs: { name: _vm.animation } }, [
        _c(
          "div",
          {
            directives: [
              {
                name: "show",
                rawName: "v-show",
                value: _vm.visible,
                expression: "visible"
              }
            ],
            staticClass: "__content"
          },
          [
            _c(
              "div",
              {
                class: _vm.css.className,
                staticStyle: { position: "relative" },
                style: _vm.css.style
              },
              _vm._l(_vm.dataSource, function(it) {
                return _c(
                  "div",
                  {
                    key: it.id,
                    style: _vm.isDraggable
                      ? {
                          position: "absolute",
                          width: "" + (it.w ? it.w + "px" : "auto"),
                          height: "" + (it.h ? it.h + "px" : "auto"),
                          left: it.x + "px",
                          top: it.y + "px",
                          transform: "rotate(" + it.r + "deg)"
                        }
                      : {}
                  },
                  [
                    _c(
                      "vm-" + it.module + "-viewer",
                      _vm._b({ tag: "component" }, "component", it, false)
                    )
                  ],
                  1
                )
              }),
              0
            )
          ]
        )
      ])
    ],
    1
  )
};
var __vue_staticRenderFns__$a = [];
__vue_render__$a._withStripped = true;

  /* style */
  var __vue_inject_styles__$a = function (inject) {
    if (!inject) { return }
    inject("data-v-1281cec4_0", { source: ".vm-tools-preview[data-v-1281cec4] {\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 999;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.vm-tools-preview .__mask[data-v-1281cec4] {\n  position: absolute;\n  z-index: 997;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, .2);\n  -webkit-transition: opacity 0.2s;\n  transition: opacity 0.2s;\n}\n.vm-tools-preview .__content[data-v-1281cec4] {\n  position: relative;\n  z-index: 998;\n  overflow: auto;\n  max-height: 100vh;\n  max-width: 100vw;\n  -webkit-transition: opacity 0.2s, -webkit-transform 0.2s;\n  transition: opacity 0.2s, -webkit-transform 0.2s;\n  transition: transform 0.2s, opacity 0.2s;\n  transition: transform 0.2s, opacity 0.2s, -webkit-transform 0.2s;\n}\n.vm-tools-preview .__close[data-v-1281cec4] {\n  position: absolute;\n  right: 30px;\n  top: 30px;\n  font-size: 24px;\n  z-index: 999;\n}\n.fade-enter[data-v-1281cec4], .fade-leave-active[data-v-1281cec4] {\n  opacity: 0;\n}\n\n/*# sourceMappingURL=preview.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/tools/preview.vue","preview.vue"],"names":[],"mappings":"AAoIA;EACA,eAAA;EACA,MAAA;EACA,QAAA;EACA,OAAA;EACA,SAAA;EACA,YAAA;EACA,oBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,wBAAA;MAAA,qBAAA;UAAA,uBAAA;ACnIA;ADoIA;EACA,kBAAA;EACA,YAAA;EACA,MAAA;EACA,OAAA;EACA,WAAA;EACA,YAAA;EACA,mCAAA;EAEA,gCAAA;EAAA,wBAAA;ACnIA;ADqIA;EACA,kBAAA;EACA,YAAA;EACA,cAAA;EACA,iBAAA;EACA,gBAAA;EACA,wDAAA;EAAA,gDAAA;EAAA,wCAAA;EAAA,gEAAA;ACnIA;ADqIA;EACA,kBAAA;EACA,WAAA;EACA,SAAA;EACA,eAAA;EACA,YAAA;ACnIA;ADsIA;EACA,UAAA;ACnIA;;AAEA,sCAAsC","file":"preview.vue","sourcesContent":["<template>\n\t<div class=\"vm-tools-preview\">\n\t\t<transition v-if=\"mask\" :name=\"animation\" >\n\t\t\t<div v-show=\"visible\" class=\"__mask\" @click=\"handleClose\" />\n\t\t</transition>\n\t\t<transition v-if=\"mask\" :name=\"animation\" >\n\t\t\t<div v-show=\"visible\" class=\"__close\" @click=\"handleClose\">&#10005;</div>\n\t\t</transition>\n\t\t<transition :name=\"animation\">\n\t\t\t<div v-show=\"visible\" class=\"__content\">\n\t\t\t\t<div :style=\"css.style\" :class=\"css.className\" style=\"position: relative;\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tv-for=\"(it) in dataSource\" \n\t\t\t\t\t\t:key=\"it.id\" \n\t\t\t\t\t\t:style=\"isDraggable ? { \n\t\t\t\t\t\t\tposition: 'absolute', \n\t\t\t\t\t\t\twidth: `${it.w ? `${it.w}px` : 'auto' }`, \n\t\t\t\t\t\t\theight: `${it.h ? `${it.h}px` : 'auto' }`, \n\t\t\t\t\t\t\tleft: `${it.x}px`, \n\t\t\t\t\t\t\ttop: `${it.y}px`, \n\t\t\t\t\t\t\ttransform: `rotate(${it.r}deg)`\n\t\t\t\t\t\t} : {} \"\n\t\t\t\t\t>\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"`vm-${it.module}-viewer`\" \n\t\t\t\t\t\t\tv-bind=\"it\" \n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</transition>\n\t</div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { cloneDeep, clearCtor } from '../../utils/helper';\n\nconst wrapper = {\n\tname: 'vm-preview',\n\tcomponents: {\n\t\t\n\t},\n\tprops: {\n\t\tdataSource: Array,\n\t\tcss: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({ style: {}, className: \"\" })\n\t\t},\n\t\tanimation: {\n\t\t\ttype: String,\n\t\t\tdefault: 'fade'\n\t\t},\n\t\tmask: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\tdefault: 'draggable'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tvisible: false,\n\t\t\ttransform: `translate(-100px, -100px)`\n\t\t};\n\t},\n\tcomputed: {\n\t\tisDraggable() {\n\t\t\treturn this.mode === 'draggable';\n\t\t}\n\t},\n\twatch: {\n\t\t\n\t},\n\tmounted() {\n\t\tthis.visible = true;\n\t},\n\tupdated() {\n\t},\n\tmethods: {\n\t\thandleClose() {\n\t\t\tthis.visible = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$emit('close');\n\t\t\t}, 300); // \n\t\t}\n\t},\n};\nexport default wrapper;\n\nlet Dom = document.body;\nexport const Preview = {\n\tvm: null,\n\tshow(opts = {}) {\n\t\tlet { components = {}, ...rest } = opts;\n\n\t\t// \n\t\tcomponents = clearCtor(components);\n\n\t\tconst div = document.createElement('div');\n\t\tconst VueComponent = Vue.extend(cloneDeep({ \n\t\t\t...wrapper, \n\t\t\tcomponents: { \n\t\t\t\t...wrapper.components, \n\t\t\t\t...components \n\t\t\t} \n\t\t}));\n\t\t// \n\t\tthis.vm && this.vm.$emit('close');\n\t\tthis.vm = new VueComponent({\n\t\t\tel: div,\n\t\t\tpropsData: {\n\t\t\t\t...rest\n\t\t\t}\n\t\t});\n\t\tthis.vm.$on('close', () => {\n\t\t\tthis.vm.$destroy();\n\t\t\t// \n\t\t\tDom.removeChild(this.vm.$el);\n\t\t});\n\t\tDom.appendChild(this.vm.$el);\n\t\treturn this.vm;\n\t},\n\thide() {\n\t\tthis.vm && this.vm.$emit('close');\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.vm-tools-preview {\n\tposition: fixed;\n\ttop: 0;\n\tright: 0;\n\tleft: 0;\n\tbottom: 0;\n\tz-index: 999;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\t.__mask {\n\t\tposition: absolute;\n\t\tz-index: 997;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-color: rgba(#000, 0.2);\n\t\t// opacity: 0;\n\t\ttransition: opacity 0.2s;\n\t}\n\t.__content {\n\t\tposition: relative;\n\t\tz-index: 998;\n\t\toverflow: auto; // \n\t\tmax-height: 100vh; \n\t\tmax-width: 100vw; \n\t\ttransition: transform 0.2s, opacity 0.2s;\n\t}\n\t.__close {\n\t\tposition: absolute;\n\t\tright: 30px; \n\t\ttop: 30px;\n\t\tfont-size: 24px;\n\t\tz-index: 999;\n\t}\n}\n.fade-enter, .fade-leave-active {\n\topacity: 0;\n}\n</style>\n",".vm-tools-preview {\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.vm-tools-preview .__mask {\n  position: absolute;\n  z-index: 997;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.2);\n  transition: opacity 0.2s;\n}\n.vm-tools-preview .__content {\n  position: relative;\n  z-index: 998;\n  overflow: auto;\n  max-height: 100vh;\n  max-width: 100vw;\n  transition: transform 0.2s, opacity 0.2s;\n}\n.vm-tools-preview .__close {\n  position: absolute;\n  right: 30px;\n  top: 30px;\n  font-size: 24px;\n  z-index: 999;\n}\n\n.fade-enter, .fade-leave-active {\n  opacity: 0;\n}\n\n/*# sourceMappingURL=preview.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$a = "data-v-1281cec4";
  /* module identifier */
  var __vue_module_identifier__$a = undefined;
  /* functional template */
  var __vue_is_functional_template__$a = false;
  /* style inject SSR */
  

  
  var ToolsPreview = normalizeComponent_1(
    { render: __vue_render__$a, staticRenderFns: __vue_staticRenderFns__$a },
    __vue_inject_styles__$a,
    __vue_script__$a,
    __vue_scope_id__$a,
    __vue_is_functional_template__$a,
    __vue_module_identifier__$a,
    browser,
    undefined
  );

var script$a = {
  name: 'vm-combo',
  components: {
    // vm-frame, vm-tools-widget, vm-editor,
    'vm-tools-operation': ToolsOperation,
    'vm-tools-save': ToolsSave
  },
  props: {
    width: Number,
    height: Number,
    dataSource: {
      type: Array,
      default: function _default() {
        return [];
      }
    },

    /**
     * frame
     */
    frameStyle: Object,
    frameW: Number,
    frameH: Number,
    frameOpts: Object,

    /**
     * tools
     */
    toolsStyle: Object,
    toolsW: Number,
    toolsH: Number,
    toolsOpts: Object
  },
  data: function data() {
    return {
      editor: null,

      /**
       * vm-tools-operation
       */
      current: 0,
      total: 0,
      rebuildData: []
    };
  },
  computed: {
    style: function style() {
      var w = this.width === 0 ? 'auto' : "".concat(this.width, "px");
      var h = this.height === 0 ? 'auto' : "".concat(this.height, "px");
      return {
        width: w,
        height: h
      };
    },
    frame: function frame() {
      return this.mode === 'draggable' ? 'vm-draggable-frame' : 'vm-sort-list-frame';
    }
  },
  watch: {
    dataSource: {
      deep: true,
      immediate: true,
      handler: function handler() {
        // todo, 
        this.rebuildData = cloneDeep_1(this.dataSource);
      }
    }
  },
  created: function created() {
    this.historyData = [];
  },
  destroyed: function destroyed() {
    Preview.hide();
  },
  methods: {
    /**
     * 
     * current, total
     */
    sync: function sync(opts) {
      for (var key in opts) {
        if (this[key] != opts[key]) {
          this.$emit("update:".concat(key), opts[key]);
        }
      }
    },

    /**
     * draggable
     */
    handleActivated: function handleActivated(it) {
      this.editor = it;
    },
    handleDeactivated: function handleDeactivated(it) {
      this.editor = null;
    },

    /**
     * 
     */
    handleChange: function handleChange(_ref) {
      var type = _ref.type,
          id = _ref.id,
          index = _ref.index,
          old = _ref.old,
          sort = _ref.sort;

      if (!type || !sort && !id) {
        console.error('[wya-vm/combo]: id, type is required');
      }

      var current = this.current,
          total = this.total;
      var target = {
        type: type,
        id: id,
        old: old,
        sort: sort,
        index: id && typeof index === 'undefined' ? this.rebuildData.findIndex(function (item) {
          return item.id === id;
        }) : index,
        data: cloneDeep_1(this.rebuildData.find(function (item) {
          return item.id === id;
        }))
      }; // 

      current === total ? this.historyData.push(target) : this.historyData.splice(current, total - current, target);
      var length = this.historyData.length;
      this.current = length;
      this.total = length;
      type === 'delete' && (this.rebuildData.splice(target.index, 1), this.editor = null);
    },

    /**
     * tools-operation
     */
    handleOperate: function handleOperate(type) {
      this[type] && this[type]();
    },
    delete: function _delete() {
      var _ref2 = this.editor || {},
          id = _ref2.id;

      if (!id) {
        this.$emit('error', {
          type: 'id',
          msg: ""
        });
        return;
      }

      this.handleChange({
        type: 'delete',
        id: id
      });
    },
    undo: function undo() {
      var current = this.current - 1;

      if (current < 0) {
        this.$emit('error', {
          type: 'undo',
          msg: ""
        });
        return;
      }

      this.current = current;

      var _ref3 = this.historyData[this.current] || {},
          type = _ref3.type,
          id = _ref3.id,
          data = _ref3.data,
          index = _ref3.index,
          old = _ref3.old,
          sort = _ref3.sort;

      switch (type) {
        case 'create':
          this.rebuildData.splice(index, 1);
          break;

        case 'delete':
          this.rebuildData.splice(index, 0, data);
          break;

        case 'update':
          this.rebuildData.splice(index, 1, cloneDeep_1(_objectSpread({}, data, old)));
          break;

        case 'sort':
          this.$refs.frame.sortData(sort);
          break;

        default:
          break;
      }

      if (this.editor && this.editor.id === id) {
        this.editor = this.rebuildData[index];
      }
    },
    redo: function redo() {
      var current = this.current + 1;

      if (current > this.total) {
        this.$emit('error', {
          type: 'undo',
          msg: ""
        });
        return;
      }

      this.current = current;
      var _this$historyData = this.historyData[this.current - 1],
          type = _this$historyData.type,
          id = _this$historyData.id,
          data = _this$historyData.data,
          index = _this$historyData.index,
          sort = _this$historyData.sort;

      switch (type) {
        case 'create':
          this.rebuildData.splice(index, 1, data);
          break;

        case 'delete':
          this.rebuildData.splice(index, 1);
          break;

        case 'update':
          this.rebuildData.splice(index, 1, data);
          break;

        case 'sort':
          this.$refs.frame.sortData(sort);
          break;

        default:
          break;
      }

      if (this.editor && this.editor.id === id) {
        this.editor = this.rebuildData[index];
      }
    },

    /**
     * tools-save
     */
    save: function save() {
      var data = cloneDeep_1(this.rebuildData) || [];

      if (data.length === 0) {
        this.$emit('error', {
          type: 'save',
          msg: "\u4FDD\u5B58\u5BF9\u8C61\u4E0D\u80FD\u4E3A\u7A7A"
        });
        return;
      }

      var modules = this.$options.modules;

      for (var i = 0; i < data.length; i++) {
        var mod = data[i].module;

        if (modules[mod].dataValidity) {
          var error = modules[mod].dataValidity(data[i]);

          if (error) {
            this.$emit('error', {
              type: 'save',
              msg: "\u7B2C".concat(i + 1, "\u4E2A - ").concat(error.error),
              index: i
            }); // 

            this.$refs.frame.setActived(i);
            return;
          }
        }
      }
      /**
       * 
       */


      this.$emit('save', data);
    },
    preview: function preview() {
      if (this.rebuildData.length === 0) {
        this.$emit('error', {
          type: 'preview',
          msg: "\u9884\u89C8\u6570\u636E\u5BF9\u8C61\u4E0D\u80FD\u4E3A\u7A7A"
        });
        return;
      }

      Preview.show({
        components: this.$options.viewers,
        dataSource: cloneDeep_1(this.rebuildData),
        css: {
          style: _objectSpread({}, this.frameStyle, {
            width: this.frameW === 0 ? 'auto' : "".concat(this.frameW, "px"),
            height: this.frameH === 0 ? 'auto' : "".concat(this.frameH, "px")
          }),
          className: '__frame'
        }
      });
    }
  }
};

/* script */
var __vue_script__$b = script$a;

/* template */
var __vue_render__$b = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    { staticClass: "vm-combo", style: _vm.style },
    [
      _c(
        "vm-tools-widget",
        _vm._b(
          { staticClass: "__tools", style: _vm.toolsStyle },
          "vm-tools-widget",
          _vm.toolsOpts,
          false
        )
      ),
      _vm._v(" "),
      _c("vm-tools-save", {
        on: {
          save: function($event) {
            return _vm.handleOperate("save")
          },
          preview: function($event) {
            return _vm.handleOperate("preview")
          }
        }
      }),
      _vm._v(" "),
      _c("vm-tools-operation", {
        attrs: {
          current: _vm.current,
          total: _vm.total,
          "is-edit": !!_vm.editor
        },
        on: {
          undo: function($event) {
            return _vm.handleOperate("undo")
          },
          redo: function($event) {
            return _vm.handleOperate("redo")
          },
          delete: function($event) {
            return _vm.handleOperate("delete")
          }
        }
      }),
      _vm._v(" "),
      _c(
        "vm-frame",
        _vm._b(
          {
            ref: "frame",
            staticClass: "__frame",
            style: _vm.frameStyle,
            attrs: {
              width: _vm.frameW,
              height: _vm.frameH,
              "data-source": _vm.rebuildData,
              editor: _vm.editor
            },
            on: {
              activated: _vm.handleActivated,
              deactivated: _vm.handleDeactivated,
              change: _vm.handleChange
            }
          },
          "vm-frame",
          _vm.frameOpts,
          false
        )
      ),
      _vm._v(" "),
      _vm.editor
        ? _c("vm-editor", {
            attrs: { "data-source": _vm.editor },
            on: { change: _vm.handleChange }
          })
        : _vm._e()
    ],
    1
  )
};
var __vue_staticRenderFns__$b = [];
__vue_render__$b._withStripped = true;

  /* style */
  var __vue_inject_styles__$b = function (inject) {
    if (!inject) { return }
    inject("data-v-66203caf_0", { source: "\n\n/*# sourceMappingURL=combo.vue.map */", map: {"version":3,"sources":["combo.vue"],"names":[],"mappings":";;AAEA,oCAAoC","file":"combo.vue","sourcesContent":["\n\n/*# sourceMappingURL=combo.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$b = "data-v-66203caf";
  /* module identifier */
  var __vue_module_identifier__$b = undefined;
  /* functional template */
  var __vue_is_functional_template__$b = false;
  /* style inject SSR */
  

  
  var Combo = normalizeComponent_1(
    { render: __vue_render__$b, staticRenderFns: __vue_staticRenderFns__$b },
    __vue_inject_styles__$b,
    __vue_script__$b,
    __vue_scope_id__$b,
    __vue_is_functional_template__$b,
    __vue_module_identifier__$b,
    browser,
    undefined
  );

//
var script$b = {
  name: 'vm-tools-widget',
  components: {},
  props: {
    width: Number,
    height: Number,
    type: {
      type: String,
      default: 'free' // sort-list

    },
    dataSource: Array
  },
  data: function data() {
    var modules = this.$parent.$options.modules;
    var toolsList = {};

    for (var key in modules) {
      if (hasOwn(modules, key)) {
        var item = modules[key];
        var type = item.type || 'undefined';

        if (!toolsList[type]) {
          toolsList[type] = [];
        }

        toolsList[type].push({
          module: item.module,
          component: item.Widget || item.name
        });
      }
    }

    return {
      toolsList: toolsList
    };
  },
  computed: {
    style: function style() {
      var w = this.width === 0 ? 'auto' : "".concat(this.width, "px");
      var h = this.height === 0 ? 'auto' : "".concat(this.height, "px");
      return {
        width: w,
        height: h
      };
    }
  },
  created: function created() {// console.log(this.$options.modules);
  },
  methods: {
    handleStart: function handleStart(e, item) {
      e.dataTransfer.setData(WIDGET_TO_FRAME, item);
    }
  }
};

/* script */
var __vue_script__$c = script$b;

/* template */
var __vue_render__$c = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "div",
    { staticClass: "vm-tools-widget", style: _vm.style },
    _vm._l(_vm.toolsList, function(item, key) {
      return _c(
        "div",
        { key: key },
        [
          key !== "undefined"
            ? _c("div", { staticClass: "__title" }, [
                _vm._v("\n\t\t\t" + _vm._s(key) + "\t\t\n\t\t")
              ])
            : _vm._e(),
          _vm._v(" "),
          _vm._l(item, function(it) {
            return _c(
              "div",
              {
                key: it.module,
                staticClass: "__item",
                attrs: { draggable: "" },
                on: {
                  dragstart: function($event) {
                    return _vm.handleStart($event, it.module)
                  }
                }
              },
              [
                typeof it.component === "string"
                  ? _c("span", [_vm._v(_vm._s(it.component))])
                  : _c("vm-" + it.module + "-widget", { tag: "component" })
              ],
              1
            )
          })
        ],
        2
      )
    }),
    0
  )
};
var __vue_staticRenderFns__$c = [];
__vue_render__$c._withStripped = true;

  /* style */
  var __vue_inject_styles__$c = function (inject) {
    if (!inject) { return }
    inject("data-v-3c206708_0", { source: ".vm-tools-widget[data-v-3c206708] {\n  width: 400px;\n}\n.vm-tools-widget .__title[data-v-3c206708] {\n  padding: 15px;\n  font-size: 18px;\n}\n.vm-tools-widget .__item[data-v-3c206708] {\n  display: inline-block;\n  border: 1px solid gray;\n  background-color: white;\n  line-height: 30px;\n  text-align: center;\n  width: 70px;\n  margin: 0 15px 15px 15px;\n  cursor: move;\n  border-radius: 3px;\n}\n\n/*# sourceMappingURL=widget.vue.map */", map: {"version":3,"sources":["/Users/deot/Desktop/wya/github/wya-vm/src/combo/tools/widget.vue","widget.vue"],"names":[],"mappings":"AAgFA;EACA,YAAA;AC/EA;ADgFA;EACA,aAAA;EACA,eAAA;AC9EA;ADgFA;EACA,qBAAA;EACA,sBAAA;EACA,uBAAA;EACA,iBAAA;EACA,kBAAA;EACA,WAAA;EACA,wBAAA;EACA,YAAA;EACA,kBAAA;AC9EA;;AAEA,qCAAqC","file":"widget.vue","sourcesContent":["<template>\n\t<div :style=\"style\" class=\"vm-tools-widget\">\n\t\t<div v-for=\"(item, key) in toolsList\" :key=\"key\">\n\t\t\t<div v-if=\"key !== 'undefined'\" class=\"__title\">\n\t\t\t\t{{ key }}\t\t\n\t\t\t</div>\n\t\t\t<div \n\t\t\t\tv-for=\"(it) in item\" \n\t\t\t\t:key=\"it.module\" \n\t\t\t\tclass=\"__item\" \n\t\t\t\tdraggable \n\t\t\t\t@dragstart=\"handleStart($event, it.module)\"\n\t\t\t>\n\t\t\t\t<span v-if=\"typeof it.component === 'string'\">{{ it.component }}</span>\n\t\t\t\t<component v-else :is=\"`vm-${it.module}-widget`\"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { hasOwn } from '../../utils/helper';\nimport { WIDGET_TO_FRAME } from '../constants';\n\nexport default {\n\tname: 'vm-tools-widget',\n\tcomponents: {\n\t},\n\tprops: {\n\t\twidth: Number,\n\t\theight: Number,\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: 'free' // sort-list\n\t\t},\n\t\tdataSource: Array\n\t},\n\tdata() {\n\t\tconst { modules } = this.$parent.$options;\n\t\tlet toolsList = {};\n\t\tfor (let key in modules) {\n\t\t\tif (hasOwn(modules, key)) {\n\t\t\t\tlet item = modules[key];\n\t\t\t\tlet type = item.type || 'undefined';\n\t\t\t\tif (!toolsList[type]) {\n\t\t\t\t\ttoolsList[type] = [];\n\t\t\t\t}\n\t\t\t\ttoolsList[type].push({\n\t\t\t\t\tmodule: item.module,\n\t\t\t\t\tcomponent: item.Widget || item.name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\ttoolsList\n\t\t};\n\t},\n\tcomputed: {\n\t\tstyle() {\n\t\t\tconst w = this.width === 0 ? 'auto' : `${this.width}px`;\n\t\t\tconst h = this.height === 0 ? 'auto' : `${this.height}px`;\n\n\t\t\treturn {\n\t\t\t\twidth: w,\n\t\t\t\theight: h\n\t\t\t};\n\t\t}\n\t},\n\tcreated() {\n\t\t// console.log(this.$options.modules);\n\t},\n\tmethods: {\n\t\thandleStart(e, item) {\n\t\t\te.dataTransfer.setData(WIDGET_TO_FRAME, item);\n\t\t}\n\t},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.vm-tools-widget {\n\twidth: 400px;\n\t.__title {\n\t\tpadding: 15px;\n\t\tfont-size: 18px;\n\t}\n\t.__item {\n\t\tdisplay: inline-block;\n\t\tborder: 1px solid gray;\n\t\tbackground-color: white;\n\t\tline-height: 30px;\n\t\ttext-align: center;\n\t\twidth: 70px;\n\t\tmargin: 0 15px 15px 15px;\n\t\tcursor: move;\n\t\tborder-radius: 3px;\n\t}\n}\n\n</style>\n",".vm-tools-widget {\n  width: 400px;\n}\n.vm-tools-widget .__title {\n  padding: 15px;\n  font-size: 18px;\n}\n.vm-tools-widget .__item {\n  display: inline-block;\n  border: 1px solid gray;\n  background-color: white;\n  line-height: 30px;\n  text-align: center;\n  width: 70px;\n  margin: 0 15px 15px 15px;\n  cursor: move;\n  border-radius: 3px;\n}\n\n/*# sourceMappingURL=widget.vue.map */"]}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$c = "data-v-3c206708";
  /* module identifier */
  var __vue_module_identifier__$c = undefined;
  /* functional template */
  var __vue_is_functional_template__$c = false;
  /* style inject SSR */
  

  
  var ToolsWidget = normalizeComponent_1(
    { render: __vue_render__$c, staticRenderFns: __vue_staticRenderFns__$c },
    __vue_inject_styles__$c,
    __vue_script__$c,
    __vue_scope_id__$c,
    __vue_is_functional_template__$c,
    __vue_module_identifier__$c,
    browser,
    undefined
  );

var script$c = {
  name: 'vm-editor',
  components: {},
  props: {
    dataSource: Object
  },
  data: function data() {
    return {};
  },
  computed: {},
  created: function created() {},
  methods: {
    /**
     * hack
     * 
     */
    handleChange: function handleChange() {
      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      if (_typeof(opts) !== 'object') { return; }

      for (var key in opts) {
        var val = opts[key];
        ['x', 'y', 'z', 'r', 'w', 'h'].includes(key) && (val = Number(val));

        if (hasOwn(opts, key) && !valueIsNaN(val)) {
          this.$emit('change', {
            type: 'update',
            id: this.dataSource.id,
            old: _defineProperty$1({}, key, val)
          });
          this.$refs.target.$emit("update:".concat(key), val);
        }
      }
    }
  }
};

/* script */
var __vue_script__$d = script$c;

/* template */
var __vue_render__$d = function() {
  var _vm = this;
  var _h = _vm.$createElement;
  var _c = _vm._self._c || _h;
  return _c(
    "vm-" + _vm.dataSource.module + "-editor",
    _vm._b(
      {
        ref: "target",
        tag: "component",
        staticClass: "vm-editor vm-hack-editor",
        on: { change: _vm.handleChange }
      },
      "component",
      _vm.dataSource,
      false,
      true
    )
  )
};
var __vue_staticRenderFns__$d = [];
__vue_render__$d._withStripped = true;

  /* style */
  var __vue_inject_styles__$d = function (inject) {
    if (!inject) { return }
    inject("data-v-557535b5_0", { source: "\n\n/*# sourceMappingURL=editor.vue.map */", map: {"version":3,"sources":["editor.vue"],"names":[],"mappings":";;AAEA,qCAAqC","file":"editor.vue"}, media: undefined });

  };
  /* scoped */
  var __vue_scope_id__$d = "data-v-557535b5";
  /* module identifier */
  var __vue_module_identifier__$d = undefined;
  /* functional template */
  var __vue_is_functional_template__$d = false;
  /* style inject SSR */
  

  
  var Editor$1 = normalizeComponent_1(
    { render: __vue_render__$d, staticRenderFns: __vue_staticRenderFns__$d },
    __vue_inject_styles__$d,
    __vue_script__$d,
    __vue_scope_id__$d,
    __vue_is_functional_template__$d,
    __vue_module_identifier__$d,
    browser,
    undefined
  );

var root$1 = (function () {
  var modules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultModules;
  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var _opts$mode = opts.mode,
      mode = _opts$mode === void 0 ? "draggable" : _opts$mode;

  try {
    var newCombo = cloneDeep_1(opts.Combo || Combo);
    var newFrame = cloneDeep_1(opts.Frame || (mode === 'draggable' ? DraggableFrame : SortableFrame));
    var newToolsWidget = cloneDeep_1(opts.ToolsWidget || ToolsWidget);
    var newToolsPreview = cloneDeep_1(opts.ToolsPreview || ToolsPreview);
    var newEditor = cloneDeep_1(opts.Editor || Editor$1);
    var viewers = {};
    var editors = {};
    var widgets = {};
    Object.keys(modules).forEach(function (item, index) {
      var _modules$item = modules[item],
          _Vditor = _modules$item.Viewer,
          _Editor = _modules$item.Editor,
          _Widget = _modules$item.Widget;
      viewers["vm-".concat(item, "-viewer")] = _Vditor;
      editors["vm-".concat(item, "-editor")] = _Editor;
      widgets["vm-".concat(item, "-widget")] = _Widget;
    }); // $options

    newCombo.modules = modules;
    newCombo.viewers = viewers;
    newCombo.editors = editors; // components

    newFrame.components = _objectSpread({}, newFrame.components, viewers);
    newEditor.components = _objectSpread({}, newEditor.components, editors);
    newToolsWidget.components = _objectSpread({}, newToolsWidget.components, widgets);
    newCombo.components = _objectSpread({}, newCombo.components, {
      'vm-frame': newFrame,
      'vm-editor': newEditor,
      'vm-tools-widget': newToolsWidget
    });
    newToolsPreview.components = _objectSpread({}, newToolsPreview.components, viewers); // cloneDeep vue_Ctor

    return {
      Combo: cloneDeep_1(newCombo),
      Preview: cloneDeep_1(newToolsPreview)
    };
  } catch (e) {
    console.error("[wya-vm/register]", e);
    throw new Error(e);
  }
});

exports.Draggable = Draggable;
exports.Sortable = Sortable;
exports.createVMDrags = root$1;
